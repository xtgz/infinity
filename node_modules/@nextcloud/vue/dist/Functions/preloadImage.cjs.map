{"version":3,"file":"preloadImage.cjs","sources":["../../src/functions/preloadImage/index.ts"],"sourcesContent":["/**\n * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport PQueue from 'p-queue'\n\nconst queue = new PQueue({ concurrency: 5 })\n\n/**\n * Preload an image URL\n * @param url URL of the image\n */\nexport function preloadImage(url: string): Promise<boolean> {\n\tconst { resolve, promise } = Promise.withResolvers<boolean>()\n\tqueue.add(() => {\n\t\tconst image = new Image()\n\t\timage.onerror = () => resolve(false)\n\t\timage.onload = () => resolve(true)\n\t\timage.src = url\n\t\treturn promise\n\t})\n\n\treturn promise\n}\n"],"names":["PQueue"],"mappings":";;;;;AAOA,MAAM,QAAQ,IAAIA,gBAAA,QAAO,EAAE,aAAa,GAAG;AAMpC,SAAS,aAAa,KAA+B;AAC3D,QAAM,EAAE,SAAS,YAAY,QAAQ,cAAuB;AAC5D,QAAM,IAAI,MAAM;AACT,UAAA,QAAQ,IAAI,MAAM;AAClB,UAAA,UAAU,MAAM,QAAQ,KAAK;AAC7B,UAAA,SAAS,MAAM,QAAQ,IAAI;AACjC,UAAM,MAAM;AACL,WAAA;AAAA,EAAA,CACP;AAEM,SAAA;AACR;;"}