{"version":3,"file":"scopedstorage.js","names":["ScopedStorage","constructor","scope","wrapped","persistent","_defineProperty","concat","GLOBAL_SCOPE_PERSISTENT","GLOBAL_SCOPE_VOLATILE","btoa","scopeKey","key","setItem","value","getItem","removeItem","clear","Object","keys","filter","startsWith","map","bind","exports","default"],"sources":["../lib/scopedstorage.ts"],"sourcesContent":["import NextcloudStorage from './storage'\n\nexport default class ScopedStorage implements NextcloudStorage {\n\n\tpublic static GLOBAL_SCOPE_VOLATILE = 'nextcloud_vol'\n\tpublic static GLOBAL_SCOPE_PERSISTENT = 'nextcloud_per'\n\tprivate scope: string\n\tprivate wrapped: Storage\n\n\tconstructor(scope: string, wrapped: Storage, persistent: boolean) {\n\t\tthis.scope = `${persistent ? ScopedStorage.GLOBAL_SCOPE_PERSISTENT : ScopedStorage.GLOBAL_SCOPE_VOLATILE}_${btoa(scope)}_`\n\t\tthis.wrapped = wrapped\n\t}\n\n\tprivate scopeKey(key: string) {\n\t\treturn `${this.scope}${key}`\n\t}\n\n\tsetItem(key: string, value: string): void {\n\t\tthis.wrapped.setItem(this.scopeKey(key), value)\n\t}\n\n\tgetItem(key: string): string | null {\n\t\treturn this.wrapped.getItem(this.scopeKey(key))\n\t}\n\n\tremoveItem(key: string): void {\n\t\tthis.wrapped.removeItem(this.scopeKey(key))\n\t}\n\n\tclear(): void {\n\t\tObject.keys(this.wrapped)\n\t\t\t.filter(key => key.startsWith(this.scope))\n\t\t\t.map(this.wrapped.removeItem.bind(this.wrapped))\n\t}\n\n}\n"],"mappings":";;;;;;;;;AAEe,MAAMA,aAAa,CAA6B;EAO9DC,WAAWA,CAACC,KAAa,EAAEC,OAAgB,EAAEC,UAAmB,EAAE;IAAAC,eAAA;IAAAA,eAAA;IACjE,IAAI,CAACH,KAAK,MAAAI,MAAA,CAAMF,UAAU,GAAGJ,aAAa,CAACO,uBAAuB,GAAGP,aAAa,CAACQ,qBAAqB,OAAAF,MAAA,CAAIG,IAAI,CAACP,KAAK,CAAC,MAAG;IAC1H,IAAI,CAACC,OAAO,GAAGA,OAAO;EACvB;EAEQO,QAAQA,CAACC,GAAW,EAAE;IAC7B,UAAAL,MAAA,CAAU,IAAI,CAACJ,KAAK,EAAAI,MAAA,CAAGK,GAAG;EAC3B;EAEAC,OAAOA,CAACD,GAAW,EAAEE,KAAa,EAAQ;IACzC,IAAI,CAACV,OAAO,CAACS,OAAO,CAAC,IAAI,CAACF,QAAQ,CAACC,GAAG,CAAC,EAAEE,KAAK,CAAC;EAChD;EAEAC,OAAOA,CAACH,GAAW,EAAiB;IACnC,OAAO,IAAI,CAACR,OAAO,CAACW,OAAO,CAAC,IAAI,CAACJ,QAAQ,CAACC,GAAG,CAAC,CAAC;EAChD;EAEAI,UAAUA,CAACJ,GAAW,EAAQ;IAC7B,IAAI,CAACR,OAAO,CAACY,UAAU,CAAC,IAAI,CAACL,QAAQ,CAACC,GAAG,CAAC,CAAC;EAC5C;EAEAK,KAAKA,CAAA,EAAS;IACbC,MAAM,CAACC,IAAI,CAAC,IAAI,CAACf,OAAO,CAAC,CACvBgB,MAAM,CAACR,GAAG,IAAIA,GAAG,CAACS,UAAU,CAAC,IAAI,CAAClB,KAAK,CAAC,CAAC,CACzCmB,GAAG,CAAC,IAAI,CAAClB,OAAO,CAACY,UAAU,CAACO,IAAI,CAAC,IAAI,CAACnB,OAAO,CAAC,CAAC;EAClD;AAED;AAACoB,OAAA,CAAAC,OAAA,GAAAxB,aAAA;AAAAK,eAAA,CAlCoBL,aAAa,2BAEK,eAAe;AAAAK,eAAA,CAFjCL,aAAa,6BAGO,eAAe","ignoreList":[]}