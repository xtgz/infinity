{"version":3,"file":"index.js","names":["_storagebuilder","_interopRequireDefault","require","_scopedstorage","obj","__esModule","default","getBuilder","appId","StorageBuilder","clearStorage","storage","pred","Object","keys","filter","k","map","removeItem","bind","clearAll","storages","window","sessionStorage","localStorage","s","clearNonPersistent","startsWith","ScopedStorage","GLOBAL_SCOPE_PERSISTENT"],"sources":["../lib/index.ts"],"sourcesContent":["import StorageBuilder from './storagebuilder'\nimport ScopedStorage from './scopedstorage'\n\n/**\n * Get the storage builder for an app\n * @param appId App ID to scope storage\n */\nexport function getBuilder(appId: string): StorageBuilder {\n\treturn new StorageBuilder(appId)\n}\n\n/**\n * Clear values from storage\n * @param storage The storage to clear\n * @param pred Callback to check if value should be cleared\n */\nfunction clearStorage(storage: Storage, pred?: (value: string) => boolean): void {\n\tObject.keys(storage)\n\t\t.filter(k => pred ? pred(k) : true)\n\t\t.map(storage.removeItem.bind(storage))\n}\n\n/**\n * Clear all values from all storages\n */\nexport function clearAll(): void {\n\tconst storages = [\n\t\twindow.sessionStorage,\n\t\twindow.localStorage,\n\t]\n\tstorages.map(s => clearStorage(s))\n}\n\n/**\n * Clear ony non persistent values\n */\nexport function clearNonPersistent(): void {\n\tconst storages = [\n\t\twindow.sessionStorage,\n\t\twindow.localStorage,\n\t]\n\tstorages.map(s => clearStorage(s, k => !k.startsWith(ScopedStorage.GLOBAL_SCOPE_PERSISTENT)))\n}\n"],"mappings":";;;;;;;;AAAA,IAAAA,eAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,cAAA,GAAAF,sBAAA,CAAAC,OAAA;AAA2C,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE3C;AACA;AACA;AACA;AACO,SAASG,UAAUA,CAACC,KAAa,EAAkB;EACzD,OAAO,IAAIC,uBAAc,CAACD,KAAK,CAAC;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASE,YAAYA,CAACC,OAAgB,EAAEC,IAAiC,EAAQ;EAChFC,MAAM,CAACC,IAAI,CAACH,OAAO,CAAC,CAClBI,MAAM,CAACC,CAAC,IAAIJ,IAAI,GAAGA,IAAI,CAACI,CAAC,CAAC,GAAG,IAAI,CAAC,CAClCC,GAAG,CAACN,OAAO,CAACO,UAAU,CAACC,IAAI,CAACR,OAAO,CAAC,CAAC;AACxC;;AAEA;AACA;AACA;AACO,SAASS,QAAQA,CAAA,EAAS;EAChC,MAAMC,QAAQ,GAAG,CAChBC,MAAM,CAACC,cAAc,EACrBD,MAAM,CAACE,YAAY,CACnB;EACDH,QAAQ,CAACJ,GAAG,CAACQ,CAAC,IAAIf,YAAY,CAACe,CAAC,CAAC,CAAC;AACnC;;AAEA;AACA;AACA;AACO,SAASC,kBAAkBA,CAAA,EAAS;EAC1C,MAAML,QAAQ,GAAG,CAChBC,MAAM,CAACC,cAAc,EACrBD,MAAM,CAACE,YAAY,CACnB;EACDH,QAAQ,CAACJ,GAAG,CAACQ,CAAC,IAAIf,YAAY,CAACe,CAAC,EAAET,CAAC,IAAI,CAACA,CAAC,CAACW,UAAU,CAACC,sBAAa,CAACC,uBAAuB,CAAC,CAAC,CAAC;AAC9F","ignoreList":[]}