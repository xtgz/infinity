{"version":3,"file":"index.cjs","sources":["../lib/newFileMenu.ts","../lib/fileAction.ts","../lib/fileListAction.ts","../lib/fileListHeaders.ts","../lib/utils/filename-validation.ts","../lib/utils/filename.ts","../lib/utils/fileSize.ts","../lib/utils/sorting.ts","../lib/utils/fileSorting.ts","../lib/navigation/navigation.ts","../lib/navigation/column.ts","../node_modules/fast-xml-parser/src/util.js","../node_modules/fast-xml-parser/src/validator.js","../node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js","../node_modules/fast-xml-parser/src/xmlparser/xmlNode.js","../node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js","../node_modules/strnum/strnum.js","../node_modules/fast-xml-parser/src/ignoreAttributes.js","../node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js","../node_modules/fast-xml-parser/src/xmlparser/node2json.js","../node_modules/fast-xml-parser/src/xmlparser/XMLParser.js","../node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js","../node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js","../node_modules/fast-xml-parser/src/fxp.js","../node_modules/is-svg/index.js","../lib/navigation/view.ts","../node_modules/@nextcloud/event-bus/node_modules/semver/internal/debug.js","../node_modules/@nextcloud/event-bus/node_modules/semver/internal/constants.js","../node_modules/@nextcloud/event-bus/node_modules/semver/internal/re.js","../node_modules/@nextcloud/event-bus/node_modules/semver/internal/parse-options.js","../node_modules/@nextcloud/event-bus/node_modules/semver/internal/identifiers.js","../node_modules/@nextcloud/event-bus/node_modules/semver/classes/semver.js","../node_modules/@nextcloud/event-bus/node_modules/semver/functions/parse.js","../node_modules/@nextcloud/event-bus/node_modules/semver/functions/valid.js","../node_modules/@nextcloud/event-bus/node_modules/semver/functions/major.js","../node_modules/@nextcloud/event-bus/dist/index.mjs","../lib/fileListFilters.ts","../lib/index.ts"],"sourcesContent":["/**\n * SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport type { Folder, Node } from './index'\nimport logger from './utils/logger'\n\nexport enum NewMenuEntryCategory {\n\t/**\n\t * For actions where the user is intended to upload from their device\n\t */\n\tUploadFromDevice = 0,\n\t/**\n\t * For actions that create new nodes on the server without uploading\n\t */\n\tCreateNew = 1,\n\t/**\n\t * For everything not matching the other categories\n\t */\n\tOther = 2,\n}\n\nexport interface Entry {\n\t/** Unique ID */\n\tid: string\n\n\t/**\n\t * Category to put this entry in\n\t * (supported since Nextcloud 30)\n\t * @since 3.3.0\n\t * @default NewMenuEntryCategory.CreateNew\n\t */\n\tcategory?: NewMenuEntryCategory\n\n\t/** Translatable string displayed in the menu */\n\tdisplayName: string\n\n\t/**\n\t * Condition wether this entry is shown or not\n\t * @param context the creation context. Usually the current folder\n\t */\n\tenabled?: (context: Folder) => boolean\n\n\t/**\n\t * Either iconSvgInline or iconClass must be defined\n\t * Svg as inline string. <svg><path fill=\"...\" /></svg>\n\t */\n\ticonSvgInline?: string\n\n\t/**\n\t * Existing icon css class\n\t * @deprecated use iconSvgInline instead\n\t */\n\ticonClass?: string\n\n\t/** Order of the entry in the menu */\n\torder?: number\n\n\t/**\n\t * Function to be run after creation\n\t * @param context the creation context. Usually the current folder\n\t * @param content list of file/folders present in the context folder\n\t */\n\thandler: (context: Folder, content: Node[]) => void\n}\n\nexport class NewFileMenu {\n\n\tprivate _entries: Array<Entry> = []\n\n\tpublic registerEntry(entry: Entry) {\n\t\tthis.validateEntry(entry)\n\t\tentry.category = entry.category ?? NewMenuEntryCategory.CreateNew\n\t\tthis._entries.push(entry)\n\t}\n\n\tpublic unregisterEntry(entry: Entry | string) {\n\t\tconst entryIndex = typeof entry === 'string'\n\t\t\t? this.getEntryIndex(entry)\n\t\t\t: this.getEntryIndex(entry.id)\n\n\t\tif (entryIndex === -1) {\n\t\t\tlogger.warn('Entry not found, nothing removed', { entry, entries: this.getEntries() })\n\t\t\treturn\n\t\t}\n\n\t\tthis._entries.splice(entryIndex, 1)\n\t}\n\n\t/**\n\t * Get the list of registered entries\n\t *\n\t * @param {Folder} context the creation context. Usually the current folder\n\t */\n\tpublic getEntries(context?: Folder): Array<Entry> {\n\t\tif (context) {\n\t\t\treturn this._entries\n\t\t\t\t.filter(entry => typeof entry.enabled === 'function' ? entry.enabled(context) : true)\n\t\t}\n\t\treturn this._entries\n\t}\n\n\tprivate getEntryIndex(id: string): number {\n\t\treturn this._entries.findIndex(entry => entry.id === id)\n\t}\n\n\tprivate validateEntry(entry: Entry) {\n\t\tif (!entry.id || !entry.displayName || !(entry.iconSvgInline || entry.iconClass) || !entry.handler) {\n\t\t\tthrow new Error('Invalid entry')\n\t\t}\n\n\t\tif (typeof entry.id !== 'string'\n\t\t\t|| typeof entry.displayName !== 'string') {\n\t\t\tthrow new Error('Invalid id or displayName property')\n\t\t}\n\n\t\tif ((entry.iconClass && typeof entry.iconClass !== 'string')\n\t\t\t|| (entry.iconSvgInline && typeof entry.iconSvgInline !== 'string')) {\n\t\t\tthrow new Error('Invalid icon provided')\n\t\t}\n\n\t\tif (entry.enabled !== undefined && typeof entry.enabled !== 'function') {\n\t\t\tthrow new Error('Invalid enabled property')\n\t\t}\n\n\t\tif (typeof entry.handler !== 'function') {\n\t\t\tthrow new Error('Invalid handler property')\n\t\t}\n\n\t\tif ('order' in entry && typeof entry.order !== 'number') {\n\t\t\tthrow new Error('Invalid order property')\n\t\t}\n\n\t\tif (this.getEntryIndex(entry.id) !== -1) {\n\t\t\tthrow new Error('Duplicate entry')\n\t\t}\n\t}\n\n}\n\nexport const getNewFileMenu = function(): NewFileMenu {\n\tif (typeof window._nc_newfilemenu === 'undefined') {\n\t\twindow._nc_newfilemenu = new NewFileMenu()\n\t\tlogger.debug('NewFileMenu initialized')\n\t}\n\treturn window._nc_newfilemenu\n}\n","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { Node } from './files/node'\nimport { View } from './navigation/view'\nimport logger from './utils/logger'\n\nexport enum DefaultType {\n\tDEFAULT = 'default',\n\tHIDDEN = 'hidden',\n}\n\nexport interface FileActionData {\n\t/** Unique ID */\n\tid: string\n\t/** Translatable string displayed in the menu */\n\tdisplayName: (files: Node[], view: View) => string\n\t/** Translatable title for of the action */\n\ttitle?: (files: Node[], view: View) => string\n\t/** Svg as inline string. <svg><path fill=\"...\" /></svg> */\n\ticonSvgInline: (files: Node[], view: View) => string\n\t/** Condition wether this action is shown or not */\n\tenabled?: (files: Node[], view: View) => boolean\n\n\t/**\n\t * Function executed on single file action\n\t * @return true if the action was executed successfully,\n\t * false otherwise and null if the action is silent/undefined.\n\t * @throws Error if the action failed\n\t */\n\texec: (file: Node, view: View, dir: string) => Promise<boolean|null>,\n\t/**\n\t * Function executed on multiple files action\n\t * @return true if the action was executed successfully,\n\t * false otherwise and null if the action is silent/undefined.\n\t * @throws Error if the action failed\n\t */\n\texecBatch?: (files: Node[], view: View, dir: string) => Promise<(boolean|null)[]>\n\n\t/** This action order in the list */\n\torder?: number,\n\n\t/**\n\t * Set to true if this action is a destructive action, like \"delete\".\n\t * This will change the appearance in the action menu more prominent (e.g. red colored)\n\t */\n\tdestructive?: boolean\n\n\t/**\n\t * This action's parent id in the list.\n\t * If none found, will be displayed as a top-level action.\n\t */\n\tparent?: string,\n\n\t/**\n\t * Make this action the default.\n\t * If multiple actions are default, the first one\n\t * will be used. The other ones will be put as first\n\t * entries in the actions menu iff DefaultType.Hidden is not used.\n\t * A DefaultType.Hidden action will never be shown\n\t * in the actions menu even if another action takes\n\t * its place as default.\n\t */\n\tdefault?: DefaultType,\n\t/**\n\t * If true, the renderInline function will be called\n\t */\n\tinline?: (file: Node, view: View) => boolean,\n\t/**\n\t * If defined, the returned html element will be\n\t * appended before the actions menu.\n\t */\n\trenderInline?: (file: Node, view: View) => Promise<HTMLElement | null>,\n}\n\nexport class FileAction {\n\n\tprivate _action: FileActionData\n\n\tconstructor(action: FileActionData) {\n\t\tthis.validateAction(action)\n\t\tthis._action = action\n\t}\n\n\tget id() {\n\t\treturn this._action.id\n\t}\n\n\tget displayName() {\n\t\treturn this._action.displayName\n\t}\n\n\tget title() {\n\t\treturn this._action.title\n\t}\n\n\tget iconSvgInline() {\n\t\treturn this._action.iconSvgInline\n\t}\n\n\tget enabled() {\n\t\treturn this._action.enabled\n\t}\n\n\tget exec() {\n\t\treturn this._action.exec\n\t}\n\n\tget execBatch() {\n\t\treturn this._action.execBatch\n\t}\n\n\tget order() {\n\t\treturn this._action.order\n\t}\n\n\tget parent() {\n\t\treturn this._action.parent\n\t}\n\n\tget default() {\n\t\treturn this._action.default\n\t}\n\n\tget destructive() {\n\t\treturn this._action.destructive\n\t}\n\n\tget inline() {\n\t\treturn this._action.inline\n\t}\n\n\tget renderInline() {\n\t\treturn this._action.renderInline\n\t}\n\n\tprivate validateAction(action: FileActionData) {\n\t\tif (!action.id || typeof action.id !== 'string') {\n\t\t\tthrow new Error('Invalid id')\n\t\t}\n\n\t\tif (!action.displayName || typeof action.displayName !== 'function') {\n\t\t\tthrow new Error('Invalid displayName function')\n\t\t}\n\n\t\tif ('title' in action && typeof action.title !== 'function') {\n\t\t\tthrow new Error('Invalid title function')\n\t\t}\n\n\t\tif (!action.iconSvgInline || typeof action.iconSvgInline !== 'function') {\n\t\t\tthrow new Error('Invalid iconSvgInline function')\n\t\t}\n\n\t\tif (!action.exec || typeof action.exec !== 'function') {\n\t\t\tthrow new Error('Invalid exec function')\n\t\t}\n\n\t\t// Optional properties --------------------------------------------\n\t\tif ('enabled' in action && typeof action.enabled !== 'function') {\n\t\t\tthrow new Error('Invalid enabled function')\n\t\t}\n\n\t\tif ('execBatch' in action && typeof action.execBatch !== 'function') {\n\t\t\tthrow new Error('Invalid execBatch function')\n\t\t}\n\n\t\tif ('order' in action && typeof action.order !== 'number') {\n\t\t\tthrow new Error('Invalid order')\n\t\t}\n\n\t\tif (action.destructive !== undefined && typeof action.destructive !== 'boolean') {\n\t\t\tthrow new Error('Invalid destructive flag')\n\t\t}\n\n\t\tif ('parent' in action && typeof action.parent !== 'string') {\n\t\t\tthrow new Error('Invalid parent')\n\t\t}\n\n\t\tif (action.default && !Object.values(DefaultType).includes(action.default)) {\n\t\t\tthrow new Error('Invalid default')\n\t\t}\n\n\t\tif ('inline' in action && typeof action.inline !== 'function') {\n\t\t\tthrow new Error('Invalid inline function')\n\t\t}\n\n\t\tif ('renderInline' in action && typeof action.renderInline !== 'function') {\n\t\t\tthrow new Error('Invalid renderInline function')\n\t\t}\n\t}\n\n}\n\nexport const registerFileAction = function(action: FileAction): void {\n\tif (typeof window._nc_fileactions === 'undefined') {\n\t\twindow._nc_fileactions = []\n\t\tlogger.debug('FileActions initialized')\n\t}\n\n\t// Check duplicates\n\tif (window._nc_fileactions.find(search => search.id === action.id)) {\n\t\tlogger.error(`FileAction ${action.id} already registered`, { action })\n\t\treturn\n\t}\n\n\twindow._nc_fileactions.push(action)\n}\n\nexport const getFileActions = function(): FileAction[] {\n\tif (typeof window._nc_fileactions === 'undefined') {\n\t\twindow._nc_fileactions = []\n\t\tlogger.debug('FileActions initialized')\n\t}\n\n\treturn window._nc_fileactions\n}\n","/**\n * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport type { Folder } from './files/folder.ts'\nimport type { Node } from './files/node.ts'\nimport type { View } from './navigation/view.ts'\nimport logger from './utils/logger.ts'\n\ninterface FileListActionData {\n\t/** Unique ID */\n\tid: string\n\n\t/** Translated name of the action */\n\tdisplayName: (view: View) => string\n\n\t/** Raw svg string */\n\ticonSvgInline?: (view: View) => string\n\n\t/** Sort order */\n\torder: number\n\n\t/**\n\t * Condition whether this action is shown or not\n\t * @param view The current view\n\t * @param nodes The nodes in the current directory\n\t * @param folder The current folder\n\t */\n\tenabled?: (view: View, nodes: Node[], folder: Folder) => boolean\n\n\t/**\n\t * Function executed on single file action\n\t * @return true if the action was executed successfully,\n\t * false otherwise and null if the action is silent/undefined.\n\t * @throws Error if the action failed\n\t */\n\texec: (view: View, nodes: Node[], folder: Folder) => Promise<boolean|null>,\n}\n\nexport class FileListAction {\n\n\tprivate _action: FileListActionData\n\n\tconstructor(action: FileListActionData) {\n\t\tthis.validateAction(action)\n\t\tthis._action = action\n\t}\n\n\tget id() {\n\t\treturn this._action.id\n\t}\n\n\tget displayName() {\n\t\treturn this._action.displayName\n\t}\n\n\tget iconSvgInline() {\n\t\treturn this._action.iconSvgInline\n\t}\n\n\tget order() {\n\t\treturn this._action.order\n\t}\n\n\tget enabled() {\n\t\treturn this._action.enabled\n\t}\n\n\tget exec() {\n\t\treturn this._action.exec\n\t}\n\n\tprivate validateAction(action: FileListActionData) {\n\t\tif (!action.id || typeof action.id !== 'string') {\n\t\t\tthrow new Error('Invalid id')\n\t\t}\n\n\t\tif (!action.displayName || typeof action.displayName !== 'function') {\n\t\t\tthrow new Error('Invalid displayName function')\n\t\t}\n\n\t\tif ('iconSvgInline' in action && typeof action.iconSvgInline !== 'function') {\n\t\t\tthrow new Error('Invalid iconSvgInline function')\n\t\t}\n\n\t\tif ('order' in action && typeof action.order !== 'number') {\n\t\t\tthrow new Error('Invalid order')\n\t\t}\n\n\t\tif ('enabled' in action && typeof action.enabled !== 'function') {\n\t\t\tthrow new Error('Invalid enabled function')\n\t\t}\n\n\t\tif (!action.exec || typeof action.exec !== 'function') {\n\t\t\tthrow new Error('Invalid exec function')\n\t\t}\n\t}\n\n}\n\nexport const registerFileListAction = (action: FileListAction) => {\n\tif (typeof window._nc_filelistactions === 'undefined') {\n\t\twindow._nc_filelistactions = []\n\t}\n\n\tif (window._nc_filelistactions.find(listAction => listAction.id === action.id)) {\n\t\tlogger.error(`FileListAction with id \"${action.id}\" is already registered`, { action })\n\t\treturn\n\t}\n\n\twindow._nc_filelistactions.push(action)\n}\n\nexport const getFileListActions = (): FileListAction[] => {\n\tif (typeof window._nc_filelistactions === 'undefined') {\n\t\twindow._nc_filelistactions = []\n\t}\n\n\treturn window._nc_filelistactions\n}\n","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { Folder } from './files/folder'\nimport { View } from './navigation/view'\nimport logger from './utils/logger'\n\nexport interface HeaderData {\n\t/** Unique ID */\n\tid: string\n\t/** Order */\n\torder: number\n\t/** Condition wether this header is shown or not */\n\tenabled?: (folder: Folder, view: View) => boolean\n\t/** Executed when file list is initialized */\n\trender: (el: HTMLElement, folder: Folder, view: View) => void\n\t/** Executed when root folder changed */\n\tupdated(folder: Folder, view: View)\n}\n\nexport class Header {\n\n\tprivate _header: HeaderData\n\n\tconstructor(header: HeaderData) {\n\t\tthis.validateHeader(header)\n\t\tthis._header = header\n\t}\n\n\tget id() {\n\t\treturn this._header.id\n\t}\n\n\tget order() {\n\t\treturn this._header.order\n\t}\n\n\tget enabled() {\n\t\treturn this._header.enabled\n\t}\n\n\tget render() {\n\t\treturn this._header.render\n\t}\n\n\tget updated() {\n\t\treturn this._header.updated\n\t}\n\n\tprivate validateHeader(header: HeaderData) {\n\t\tif (!header.id || !header.render || !header.updated) {\n\t\t\tthrow new Error('Invalid header: id, render and updated are required')\n\t\t}\n\n\t\tif (typeof header.id !== 'string') {\n\t\t\tthrow new Error('Invalid id property')\n\t\t}\n\n\t\tif (header.enabled !== undefined && typeof header.enabled !== 'function') {\n\t\t\tthrow new Error('Invalid enabled property')\n\t\t}\n\n\t\tif (header.render && typeof header.render !== 'function') {\n\t\t\tthrow new Error('Invalid render property')\n\t\t}\n\n\t\tif (header.updated && typeof header.updated !== 'function') {\n\t\t\tthrow new Error('Invalid updated property')\n\t\t}\n\t}\n\n}\n\nexport const registerFileListHeaders = function(header: Header): void {\n\tif (typeof window._nc_filelistheader === 'undefined') {\n\t\twindow._nc_filelistheader = []\n\t\tlogger.debug('FileListHeaders initialized')\n\t}\n\n\t// Check duplicates\n\tif (window._nc_filelistheader.find(search => search.id === header.id)) {\n\t\tlogger.error(`Header ${header.id} already registered`, { header })\n\t\treturn\n\t}\n\n\twindow._nc_filelistheader.push(header)\n}\n\nexport const getFileListHeaders = function(): Header[] {\n\tif (typeof window._nc_filelistheader === 'undefined') {\n\t\twindow._nc_filelistheader = []\n\t\tlogger.debug('FileListHeaders initialized')\n\t}\n\n\treturn window._nc_filelistheader\n}\n","/**\n * SPDX-FileCopyrightText: Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later or LGPL-3.0-or-later\n */\n\nimport { getCapabilities } from '@nextcloud/capabilities'\n\ninterface NextcloudCapabilities extends Record<string, unknown> {\n\tfiles: {\n\t\t'bigfilechunking': boolean\n\t\t// those are new in Nextcloud 30\n\t\t'forbidden_filenames'?: string[]\n\t\t'forbidden_filename_basenames'?: string[]\n\t\t'forbidden_filename_characters'?: string[]\n\t\t'forbidden_filename_extensions'?: string[]\n\t}\n}\n\nexport enum InvalidFilenameErrorReason {\n\tReservedName = 'reserved name',\n\tCharacter = 'character',\n\tExtension = 'extension',\n}\n\ninterface InvalidFilenameErrorOptions {\n\t/**\n\t * The filename that was validated\n\t */\n\tfilename: string\n\n\t/**\n\t * Reason why the validation failed\n\t */\n\treason: InvalidFilenameErrorReason\n\n\t/**\n\t * Part of the filename that caused this error\n\t */\n\tsegment: string\n}\n\nexport class InvalidFilenameError extends Error {\n\n\tpublic constructor(options: InvalidFilenameErrorOptions) {\n\t\tsuper(`Invalid ${options.reason} '${options.segment}' in filename '${options.filename}'`, { cause: options })\n\t}\n\n\t/**\n\t * The filename that was validated\n\t */\n\tpublic get filename() {\n\t\treturn (this.cause as InvalidFilenameErrorOptions).filename\n\t}\n\n\t/**\n\t * Reason why the validation failed\n\t */\n\tpublic get reason() {\n\t\treturn (this.cause as InvalidFilenameErrorOptions).reason\n\t}\n\n\t/**\n\t * Part of the filename that caused this error\n\t */\n\tpublic get segment() {\n\t\treturn (this.cause as InvalidFilenameErrorOptions).segment\n\t}\n\n}\n\n/**\n * Validate a given filename\n * @param filename The filename to check\n * @throws {InvalidFilenameError}\n */\nexport function validateFilename(filename: string): void {\n\tconst capabilities = (getCapabilities() as NextcloudCapabilities).files\n\n\t// Handle forbidden characters\n\t// This needs to be done first as the other checks are case insensitive!\n\tconst forbiddenCharacters = capabilities.forbidden_filename_characters ?? window._oc_config?.forbidden_filenames_characters ?? ['/', '\\\\']\n\tfor (const character of forbiddenCharacters) {\n\t\tif (filename.includes(character)) {\n\t\t\tthrow new InvalidFilenameError({ segment: character, reason: InvalidFilenameErrorReason.Character, filename })\n\t\t}\n\t}\n\n\t// everything else is case insensitive (the capabilities are returned lowercase)\n\tfilename = filename.toLocaleLowerCase()\n\n\t// Handle forbidden filenames, on older Nextcloud versions without this capability it was hardcoded in the backend to '.htaccess'\n\tconst forbiddenFilenames = capabilities.forbidden_filenames ?? ['.htaccess']\n\tif (forbiddenFilenames.includes(filename)) {\n\t\tthrow new InvalidFilenameError({ filename, segment: filename, reason: InvalidFilenameErrorReason.ReservedName })\n\t}\n\n\t// Handle forbidden basenames\n\tconst endOfBasename = filename.indexOf('.', 1)\n\tconst basename = filename.substring(0, endOfBasename === -1 ? undefined : endOfBasename)\n\tconst forbiddenFilenameBasenames = capabilities.forbidden_filename_basenames ?? []\n\tif (forbiddenFilenameBasenames.includes(basename)) {\n\t\tthrow new InvalidFilenameError({ filename, segment: basename, reason: InvalidFilenameErrorReason.ReservedName })\n\t}\n\n\t// The legacy 'blacklist_files_regex' was hardcoded to the extension '.part' and '.filepart'\n\t// So if the new (Nextcloud 30) capability is not awailable then we fallback to that\n\tconst forbiddenFilenameExtensions = capabilities.forbidden_filename_extensions ?? ['.part', '.filepart']\n\tfor (const extension of forbiddenFilenameExtensions) {\n\t\tif (filename.length > extension.length && filename.endsWith(extension)) {\n\t\t\tthrow new InvalidFilenameError({ segment: extension, reason: InvalidFilenameErrorReason.Extension, filename })\n\t\t}\n\t}\n}\n\n/**\n * Check the validity of a filename\n * This is a convinient wrapper for `checkFilenameValidity` to only return a boolean for the valid\n * @param filename Filename to check validity\n */\nexport function isFilenameValid(filename: string): boolean {\n\ttry {\n\t\tvalidateFilename(filename)\n\t\treturn true\n\t} catch (error) {\n\t\tif (error instanceof InvalidFilenameError) {\n\t\t\treturn false\n\t\t}\n\t\tthrow error\n\t}\n}\n","/**\n * SPDX-FileCopyrightText: Ferdinand Thiessen <opensource@fthiessen.de>\n * SPDX-License-Identifier: AGPL-3.0-or-later or LGPL-3.0-or-later\n */\n\nimport { basename, extname } from 'path'\n\ninterface UniqueNameOptions {\n\t/**\n\t * A function that takes an index and returns a suffix to add to the file name, defaults to '(index)'\n\t * @param index The current index to add\n\t */\n\tsuffix?: (index: number) => string\n\t/**\n\t * Set to true to ignore the file extension when adding the suffix (when getting a unique directory name)\n\t */\n\tignoreFileExtension?: boolean\n}\n\n/**\n * Create an unique file name\n * @param name The initial name to use\n * @param otherNames Other names that are already used\n * @param options Optional parameters for tuning the behavior\n * @return {string} Either the initial name, if unique, or the name with the suffix so that the name is unique\n */\nexport function getUniqueName(\n\tname: string,\n\totherNames: string[],\n\toptions?: UniqueNameOptions,\n): string {\n\tconst opts = {\n\t\tsuffix: (n: number) => `(${n})`,\n\t\tignoreFileExtension: false,\n\t\t...options,\n\t}\n\n\tlet newName = name\n\tlet i = 1\n\twhile (otherNames.includes(newName)) {\n\t\tconst ext = opts.ignoreFileExtension ? '' : extname(name)\n\t\tconst base = basename(name, ext)\n\t\tnewName = `${base} ${opts.suffix(i++)}${ext}`\n\t}\n\treturn newName\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { getCanonicalLocale } from '@nextcloud/l10n'\n\nconst humanList = ['B', 'KB', 'MB', 'GB', 'TB', 'PB']\nconst humanListBinary = ['B', 'KiB', 'MiB', 'GiB', 'TiB', 'PiB']\n\n/**\n * Format a file size in a human-like format. e.g. 42GB\n *\n * The default for Nextcloud is like Windows using binary sizes but showing decimal units,\n * meaning 1024 bytes will show as 1KB instead of 1KiB or like on Apple 1.02 KB\n *\n * @param size in bytes\n * @param skipSmallSizes avoid rendering tiny sizes and return '< 1 KB' instead\n * @param binaryPrefixes True if size binary prefixes like `KiB` should be used as per IEC 80000-13\n * @param base1000 Set to true to use base 1000 as per SI or used by Apple (default is base 1024 like Linux or Windows)\n */\nexport function formatFileSize(size: number|string, skipSmallSizes = false, binaryPrefixes = false, base1000 = false): string {\n\t// Binary prefixes only work with base 1024\n\tbinaryPrefixes = binaryPrefixes && !base1000\n\n\tif (typeof size === 'string') {\n\t\tsize = Number(size)\n\t}\n\n\t// Calculate Log with base 1024 or 1000: size = base ** order\n\tlet order = size > 0 ? Math.floor(Math.log(size) / Math.log(base1000 ? 1000 : 1024)) : 0\n\n\t// Stay in range of the byte sizes that are defined\n\torder = Math.min((binaryPrefixes ? humanListBinary.length : humanList.length) - 1, order)\n\n\tconst readableFormat = binaryPrefixes ? humanListBinary[order] : humanList[order]\n\tlet relativeSize = (size / Math.pow(base1000 ? 1000 : 1024, order)).toFixed(1)\n\n\tif (skipSmallSizes === true && order === 0) {\n\t\treturn (relativeSize !== '0.0' ? '< 1 ' : '0 ') + (binaryPrefixes ? humanListBinary[1] : humanList[1])\n\t}\n\n\tif (order < 2) {\n\t\trelativeSize = parseFloat(relativeSize).toFixed(0)\n\t} else {\n\t\trelativeSize = parseFloat(relativeSize).toLocaleString(getCanonicalLocale())\n\t}\n\n\treturn relativeSize + ' ' + readableFormat\n}\n\n/**\n * Returns a file size in bytes from a humanly readable string\n * Note: `b` and `B` are both parsed as bytes and not as bit or byte.\n *\n * @param  {string} value file size in human-readable format\n * @param  {boolean} forceBinary for backwards compatibility this allows values to be base 2 (so 2KB means 2048 bytes instead of 2000 bytes)\n * @return {number} or null if string could not be parsed\n */\nexport function parseFileSize(value: string, forceBinary = false) {\n\ttry {\n\t\tvalue = `${value}`.toLocaleLowerCase().replaceAll(/\\s+/g, '').replaceAll(',', '.')\n\t} catch (e) {\n\t\treturn null\n\t}\n\n\tconst match = value.match(/^([0-9]*(\\.[0-9]*)?)([kmgtp]?)(i?)b?$/)\n\t// ignore not found, missing pre- and decimal, empty number\n\tif (match === null || match[1] === '.' || match[1] === '') {\n\t\treturn null\n\t}\n\n\tconst bytesArray = {\n\t\t'': 0,\n\t\tk: 1,\n\t\tm: 2,\n\t\tg: 3,\n\t\tt: 4,\n\t\tp: 5,\n\t\te: 6,\n\t}\n\n\tconst decimalString = `${match[1]}`\n\tconst base = (match[4] === 'i' || forceBinary) ? 1024 : 1000\n\n\treturn Math.round(Number.parseFloat(decimalString) * (base ** bytesArray[match[3]]))\n}\n","/**\n * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { getCanonicalLocale, getLanguage } from '@nextcloud/l10n'\n\ntype IdentifierFn<T> = (v: T) => unknown\nexport type SortingOrder = 'asc'|'desc'\n\n/**\n * Helper to create string representation\n * @param value Value to stringify\n */\nfunction stringify(value: unknown) {\n\t// The default representation of Date is not sortable because of the weekday names in front of it\n\tif (value instanceof Date) {\n\t\treturn value.toISOString()\n\t}\n\treturn String(value)\n}\n\n/**\n * Natural order a collection\n * You can define identifiers as callback functions, that get the element and return the value to sort.\n *\n * @param collection The collection to order\n * @param identifiers An array of identifiers to use, by default the identity of the element is used\n * @param orders Array of orders, by default all identifiers are sorted ascening\n */\nexport function orderBy<T>(collection: readonly T[], identifiers?: IdentifierFn<T>[], orders?: SortingOrder[]): T[] {\n\t// If not identifiers are set we use the identity of the value\n\tidentifiers = identifiers ?? [(value) => value]\n\t// By default sort the collection ascending\n\torders = orders ?? []\n\tconst sorting = identifiers.map((_, index) => (orders[index] ?? 'asc') === 'asc' ? 1 : -1)\n\n\tconst collator = Intl.Collator(\n\t\t[getLanguage(), getCanonicalLocale()],\n\t\t{\n\t\t\t// handle 10 as ten and not as one-zero\n\t\t\tnumeric: true,\n\t\t\tusage: 'sort',\n\t\t},\n\t)\n\n\treturn [...collection].sort((a, b) => {\n\t\tfor (const [index, identifier] of identifiers.entries()) {\n\t\t\t// Get the local compare of stringified value a and b\n\t\t\tconst value = collator.compare(stringify(identifier(a)), stringify(identifier(b)))\n\t\t\t// If they do not match return the order\n\t\t\tif (value !== 0) {\n\t\t\t\treturn value * sorting[index]\n\t\t\t}\n\t\t\t// If they match we need to continue with the next identifier\n\t\t}\n\t\t// If all are equal we need to return equality\n\t\treturn 0\n\t})\n}\n","/**\n * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport type { INode } from '../files/node'\nimport type { SortingOrder } from './sorting'\nimport { orderBy } from './sorting'\n\nexport enum FilesSortingMode {\n\tName = 'basename',\n\tModified = 'mtime',\n\tSize = 'size',\n}\n\nexport interface FilesSortingOptions {\n\t/**\n\t * They key to order the files by\n\t * @default FilesSortingMode.Name\n\t */\n\tsortingMode?: FilesSortingMode\n\n\t/**\n\t * @default 'asc'\n\t */\n\tsortingOrder?: SortingOrder\n\n\t/**\n\t * If set to true nodes marked as favorites are ordered on top of all other nodes\n\t * @default false\n\t */\n\tsortFavoritesFirst?: boolean\n\n\t/**\n\t * If set to true folders are ordered on top of files\n\t * @default false\n\t */\n\tsortFoldersFirst?: boolean\n}\n\n/**\n * Sort files and folders according to the sorting options\n * @param nodes Nodes to sort\n * @param options Sorting options\n */\nexport function sortNodes(nodes: readonly INode[], options: FilesSortingOptions = {}): INode[] {\n\tconst sortingOptions = {\n\t\t// Default to sort by name\n\t\tsortingMode: FilesSortingMode.Name,\n\t\t// Default to sort ascending\n\t\tsortingOrder: 'asc' as const,\n\t\t...options,\n\t}\n\n\t/**\n\t * Get the basename without any extension\n\t * @param name The filename to extract the basename from\n\t */\n\tconst basename = (name: string) => name.lastIndexOf('.') > 0 ? name.slice(0, name.lastIndexOf('.')) : name\n\n\tconst identifiers = [\n\t\t// 1: Sort favorites first if enabled\n\t\t...(sortingOptions.sortFavoritesFirst ? [(v: INode) => v.attributes?.favorite !== 1] : []),\n\t\t// 2: Sort folders first if sorting by name\n\t\t...(sortingOptions.sortFoldersFirst ? [(v: INode) => v.type !== 'folder'] : []),\n\t\t// 3: Use sorting mode if NOT basename (to be able to use display name too)\n\t\t...(sortingOptions.sortingMode !== FilesSortingMode.Name ? [(v: INode) => v[sortingOptions.sortingMode]] : []),\n\t\t// 4: Use display name if available, fallback to name\n\t\t(v: INode) => basename(v.displayname || v.attributes?.displayname || v.basename),\n\t\t// 5: Finally, use basename if all previous sorting methods failed\n\t\t(v: INode) => v.basename,\n\t]\n\tconst orders = [\n\t\t// (for 1): always sort favorites before normal files\n\t\t...(sortingOptions.sortFavoritesFirst ? ['asc'] : []),\n\t\t// (for 2): always sort folders before files\n\t\t...(sortingOptions.sortFoldersFirst ? ['asc'] : []),\n\t\t// (for 3): Reverse if sorting by mtime as mtime higher means edited more recent -> lower\n\t\t...(sortingOptions.sortingMode === FilesSortingMode.Modified ? [sortingOptions.sortingOrder === 'asc' ? 'desc' : 'asc'] : []),\n\t\t// (also for 3 so make sure not to conflict with 2 and 3)\n\t\t...(sortingOptions.sortingMode !== FilesSortingMode.Modified && sortingOptions.sortingMode !== FilesSortingMode.Name ? [sortingOptions.sortingOrder] : []),\n\t\t// for 4: use configured sorting direction\n\t\tsortingOptions.sortingOrder,\n\t\t// for 5: use configured sorting direction\n\t\tsortingOptions.sortingOrder,\n\t] as ('asc'|'desc')[]\n\n\treturn orderBy(nodes, identifiers, orders)\n}\n","/**\n * SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport type { View } from './view'\nimport { TypedEventTarget } from 'typescript-event-target'\nimport logger from '../utils/logger'\n\n/**\n * The event is emitted when the navigation view was updated.\n * It contains the new active view in the `detail` attribute.\n */\ninterface UpdateActiveViewEvent extends CustomEvent<View | null> {\n\ttype: 'updateActive'\n}\n\n/**\n * This event is emitted when the list of registered views is changed\n */\ninterface UpdateViewsEvent extends CustomEvent<never> {\n\ttype: 'update'\n}\n\n/**\n * The files navigation manages the available and active views\n *\n * Custom views for the files app can be registered (examples are the favorites views or the shared-with-you view).\n * It is also possible to listen on changes of the registered views or when the current active view is changed.\n * @example\n * ```js\n * const navigation = getNavigation()\n * navigation.addEventListener('update', () => {\n *     // This will be called whenever a new view is registered or a view is removed\n *     const viewNames = navigation.views.map((view) => view.name)\n *     console.warn('Registered views changed', viewNames)\n * })\n * // Or you can react to changes of the current active view\n * navigation.addEventListener('updateActive', (event) => {\n *     // This will be called whenever the active view changed\n *     const newView = event.detail // you could also use `navigation.active`\n *     console.warn('Active view changed to ' + newView.name)\n * })\n * ```\n */\nexport class Navigation extends TypedEventTarget<{ updateActive: UpdateActiveViewEvent, update: UpdateViewsEvent }> {\n\n\tprivate _views: View[] = []\n\tprivate _currentView: View | null = null\n\n\t/**\n\t * Register a new view on the navigation\n\t * @param view The view to register\n\t * @throws `Error` is thrown if a view with the same id is already registered\n\t */\n\tregister(view: View): void {\n\t\tif (this._views.find(search => search.id === view.id)) {\n\t\t\tthrow new Error(`View id ${view.id} is already registered`)\n\t\t}\n\n\t\tthis._views.push(view)\n\t\tthis.dispatchTypedEvent('update', new CustomEvent<never>('update') as UpdateViewsEvent)\n\t}\n\n\t/**\n\t * Remove a registered view\n\t * @param id The id of the view to remove\n\t */\n\tremove(id: string): void {\n\t\tconst index = this._views.findIndex(view => view.id === id)\n\t\tif (index !== -1) {\n\t\t\tthis._views.splice(index, 1)\n\t\t\tthis.dispatchTypedEvent('update', new CustomEvent('update') as UpdateViewsEvent)\n\t\t}\n\t}\n\n\t/**\n\t * Set the currently active view\n\t * @fires UpdateActiveViewEvent\n\t * @param view New active view\n\t */\n\tsetActive(view: View | null): void {\n\t\tthis._currentView = view\n\t\tconst event = new CustomEvent<View | null>('updateActive', { detail: view })\n\t\tthis.dispatchTypedEvent('updateActive', event as UpdateActiveViewEvent)\n\t}\n\n\t/**\n\t * The currently active files view\n\t */\n\tget active(): View | null {\n\t\treturn this._currentView\n\t}\n\n\t/**\n\t * All registered views\n\t */\n\tget views(): View[] {\n\t\treturn this._views\n\t}\n\n}\n\n/**\n * Get the current files navigation\n */\nexport const getNavigation = function(): Navigation {\n\tif (typeof window._nc_navigation === 'undefined') {\n\t\twindow._nc_navigation = new Navigation()\n\t\tlogger.debug('Navigation service initialized')\n\t}\n\n\treturn window._nc_navigation\n}\n","/**\n * SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport type { Node } from '../files/node'\nimport type { View } from './view'\n\ninterface ColumnData {\n\t/** Unique column ID */\n\tid: string\n\t/** Translated column title */\n\ttitle: string\n\t/** The content of the cell. The element will be appended within */\n\trender: (node: Node, view: View) => HTMLElement\n\t/** Function used to sort Nodes between them */\n\tsort?: (nodeA: Node, nodeB: Node) => number\n\t/**\n\t * Custom summary of the column to display at the end of the list.\n\t * Will not be displayed if  nothing is provided\n\t */\n\tsummary?: (node: Node[], view: View) => string\n}\n\nexport class Column implements ColumnData {\n\n\tprivate _column: ColumnData\n\n\tconstructor(column: ColumnData) {\n\t\tisValidColumn(column)\n\t\tthis._column = column\n\t}\n\n\tget id() {\n\t\treturn this._column.id\n\t}\n\n\tget title() {\n\t\treturn this._column.title\n\t}\n\n\tget render() {\n\t\treturn this._column.render\n\t}\n\n\tget sort() {\n\t\treturn this._column.sort\n\t}\n\n\tget summary() {\n\t\treturn this._column.summary\n\t}\n\n}\n\n/**\n * Typescript cannot validate an interface.\n * Please keep in sync with the Column interface requirements.\n *\n * @param {ColumnData} column the column to check\n * @return {boolean} true if the column is valid\n */\nconst isValidColumn = function(column: ColumnData): boolean {\n\tif (!column.id || typeof column.id !== 'string') {\n\t\tthrow new Error('A column id is required')\n\t}\n\n\tif (!column.title || typeof column.title !== 'string') {\n\t\tthrow new Error('A column title is required')\n\t}\n\n\tif (!column.render || typeof column.render !== 'function') {\n\t\tthrow new Error('A render function is required')\n\t}\n\n\t// Optional properties\n\tif (column.sort && typeof column.sort !== 'function') {\n\t\tthrow new Error('Column sortFunction must be a function')\n\t}\n\n\tif (column.summary && typeof column.summary !== 'function') {\n\t\tthrow new Error('Column summary must be a function')\n\t}\n\n\treturn true\n}\n","'use strict';\n\nconst nameStartChar = ':A-Za-z_\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD';\nconst nameChar = nameStartChar + '\\\\-.\\\\d\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040';\nconst nameRegexp = '[' + nameStartChar + '][' + nameChar + ']*'\nconst regexName = new RegExp('^' + nameRegexp + '$');\n\nconst getAllMatches = function(string, regex) {\n  const matches = [];\n  let match = regex.exec(string);\n  while (match) {\n    const allmatches = [];\n    allmatches.startIndex = regex.lastIndex - match[0].length;\n    const len = match.length;\n    for (let index = 0; index < len; index++) {\n      allmatches.push(match[index]);\n    }\n    matches.push(allmatches);\n    match = regex.exec(string);\n  }\n  return matches;\n};\n\nconst isName = function(string) {\n  const match = regexName.exec(string);\n  return !(match === null || typeof match === 'undefined');\n};\n\nexports.isExist = function(v) {\n  return typeof v !== 'undefined';\n};\n\nexports.isEmptyObject = function(obj) {\n  return Object.keys(obj).length === 0;\n};\n\n/**\n * Copy all the properties of a into b.\n * @param {*} target\n * @param {*} a\n */\nexports.merge = function(target, a, arrayMode) {\n  if (a) {\n    const keys = Object.keys(a); // will return an array of own properties\n    const len = keys.length; //don't make it inline\n    for (let i = 0; i < len; i++) {\n      if (arrayMode === 'strict') {\n        target[keys[i]] = [ a[keys[i]] ];\n      } else {\n        target[keys[i]] = a[keys[i]];\n      }\n    }\n  }\n};\n/* exports.merge =function (b,a){\n  return Object.assign(b,a);\n} */\n\nexports.getValue = function(v) {\n  if (exports.isExist(v)) {\n    return v;\n  } else {\n    return '';\n  }\n};\n\n// const fakeCall = function(a) {return a;};\n// const fakeCallNoReturn = function() {};\n\nexports.isName = isName;\nexports.getAllMatches = getAllMatches;\nexports.nameRegexp = nameRegexp;\n","'use strict';\n\nconst util = require('./util');\n\nconst defaultOptions = {\n  allowBooleanAttributes: false, //A tag can have attributes without any value\n  unpairedTags: []\n};\n\n//const tagsPattern = new RegExp(\"<\\\\/?([\\\\w:\\\\-_\\.]+)\\\\s*\\/?>\",\"g\");\nexports.validate = function (xmlData, options) {\n  options = Object.assign({}, defaultOptions, options);\n\n  //xmlData = xmlData.replace(/(\\r\\n|\\n|\\r)/gm,\"\");//make it single line\n  //xmlData = xmlData.replace(/(^\\s*<\\?xml.*?\\?>)/g,\"\");//Remove XML starting tag\n  //xmlData = xmlData.replace(/(<!DOCTYPE[\\s\\w\\\"\\.\\/\\-\\:]+(\\[.*\\])*\\s*>)/g,\"\");//Remove DOCTYPE\n  const tags = [];\n  let tagFound = false;\n\n  //indicates that the root tag has been closed (aka. depth 0 has been reached)\n  let reachedRoot = false;\n\n  if (xmlData[0] === '\\ufeff') {\n    // check for byte order mark (BOM)\n    xmlData = xmlData.substr(1);\n  }\n  \n  for (let i = 0; i < xmlData.length; i++) {\n\n    if (xmlData[i] === '<' && xmlData[i+1] === '?') {\n      i+=2;\n      i = readPI(xmlData,i);\n      if (i.err) return i;\n    }else if (xmlData[i] === '<') {\n      //starting of tag\n      //read until you reach to '>' avoiding any '>' in attribute value\n      let tagStartPos = i;\n      i++;\n      \n      if (xmlData[i] === '!') {\n        i = readCommentAndCDATA(xmlData, i);\n        continue;\n      } else {\n        let closingTag = false;\n        if (xmlData[i] === '/') {\n          //closing tag\n          closingTag = true;\n          i++;\n        }\n        //read tagname\n        let tagName = '';\n        for (; i < xmlData.length &&\n          xmlData[i] !== '>' &&\n          xmlData[i] !== ' ' &&\n          xmlData[i] !== '\\t' &&\n          xmlData[i] !== '\\n' &&\n          xmlData[i] !== '\\r'; i++\n        ) {\n          tagName += xmlData[i];\n        }\n        tagName = tagName.trim();\n        //console.log(tagName);\n\n        if (tagName[tagName.length - 1] === '/') {\n          //self closing tag without attributes\n          tagName = tagName.substring(0, tagName.length - 1);\n          //continue;\n          i--;\n        }\n        if (!validateTagName(tagName)) {\n          let msg;\n          if (tagName.trim().length === 0) {\n            msg = \"Invalid space after '<'.\";\n          } else {\n            msg = \"Tag '\"+tagName+\"' is an invalid name.\";\n          }\n          return getErrorObject('InvalidTag', msg, getLineNumberForPosition(xmlData, i));\n        }\n\n        const result = readAttributeStr(xmlData, i);\n        if (result === false) {\n          return getErrorObject('InvalidAttr', \"Attributes for '\"+tagName+\"' have open quote.\", getLineNumberForPosition(xmlData, i));\n        }\n        let attrStr = result.value;\n        i = result.index;\n\n        if (attrStr[attrStr.length - 1] === '/') {\n          //self closing tag\n          const attrStrStart = i - attrStr.length;\n          attrStr = attrStr.substring(0, attrStr.length - 1);\n          const isValid = validateAttributeString(attrStr, options);\n          if (isValid === true) {\n            tagFound = true;\n            //continue; //text may presents after self closing tag\n          } else {\n            //the result from the nested function returns the position of the error within the attribute\n            //in order to get the 'true' error line, we need to calculate the position where the attribute begins (i - attrStr.length) and then add the position within the attribute\n            //this gives us the absolute index in the entire xml, which we can use to find the line at last\n            return getErrorObject(isValid.err.code, isValid.err.msg, getLineNumberForPosition(xmlData, attrStrStart + isValid.err.line));\n          }\n        } else if (closingTag) {\n          if (!result.tagClosed) {\n            return getErrorObject('InvalidTag', \"Closing tag '\"+tagName+\"' doesn't have proper closing.\", getLineNumberForPosition(xmlData, i));\n          } else if (attrStr.trim().length > 0) {\n            return getErrorObject('InvalidTag', \"Closing tag '\"+tagName+\"' can't have attributes or invalid starting.\", getLineNumberForPosition(xmlData, tagStartPos));\n          } else if (tags.length === 0) {\n            return getErrorObject('InvalidTag', \"Closing tag '\"+tagName+\"' has not been opened.\", getLineNumberForPosition(xmlData, tagStartPos));\n          } else {\n            const otg = tags.pop();\n            if (tagName !== otg.tagName) {\n              let openPos = getLineNumberForPosition(xmlData, otg.tagStartPos);\n              return getErrorObject('InvalidTag',\n                \"Expected closing tag '\"+otg.tagName+\"' (opened in line \"+openPos.line+\", col \"+openPos.col+\") instead of closing tag '\"+tagName+\"'.\",\n                getLineNumberForPosition(xmlData, tagStartPos));\n            }\n\n            //when there are no more tags, we reached the root level.\n            if (tags.length == 0) {\n              reachedRoot = true;\n            }\n          }\n        } else {\n          const isValid = validateAttributeString(attrStr, options);\n          if (isValid !== true) {\n            //the result from the nested function returns the position of the error within the attribute\n            //in order to get the 'true' error line, we need to calculate the position where the attribute begins (i - attrStr.length) and then add the position within the attribute\n            //this gives us the absolute index in the entire xml, which we can use to find the line at last\n            return getErrorObject(isValid.err.code, isValid.err.msg, getLineNumberForPosition(xmlData, i - attrStr.length + isValid.err.line));\n          }\n\n          //if the root level has been reached before ...\n          if (reachedRoot === true) {\n            return getErrorObject('InvalidXml', 'Multiple possible root nodes found.', getLineNumberForPosition(xmlData, i));\n          } else if(options.unpairedTags.indexOf(tagName) !== -1){\n            //don't push into stack\n          } else {\n            tags.push({tagName, tagStartPos});\n          }\n          tagFound = true;\n        }\n\n        //skip tag text value\n        //It may include comments and CDATA value\n        for (i++; i < xmlData.length; i++) {\n          if (xmlData[i] === '<') {\n            if (xmlData[i + 1] === '!') {\n              //comment or CADATA\n              i++;\n              i = readCommentAndCDATA(xmlData, i);\n              continue;\n            } else if (xmlData[i+1] === '?') {\n              i = readPI(xmlData, ++i);\n              if (i.err) return i;\n            } else{\n              break;\n            }\n          } else if (xmlData[i] === '&') {\n            const afterAmp = validateAmpersand(xmlData, i);\n            if (afterAmp == -1)\n              return getErrorObject('InvalidChar', \"char '&' is not expected.\", getLineNumberForPosition(xmlData, i));\n            i = afterAmp;\n          }else{\n            if (reachedRoot === true && !isWhiteSpace(xmlData[i])) {\n              return getErrorObject('InvalidXml', \"Extra text at the end\", getLineNumberForPosition(xmlData, i));\n            }\n          }\n        } //end of reading tag text value\n        if (xmlData[i] === '<') {\n          i--;\n        }\n      }\n    } else {\n      if ( isWhiteSpace(xmlData[i])) {\n        continue;\n      }\n      return getErrorObject('InvalidChar', \"char '\"+xmlData[i]+\"' is not expected.\", getLineNumberForPosition(xmlData, i));\n    }\n  }\n\n  if (!tagFound) {\n    return getErrorObject('InvalidXml', 'Start tag expected.', 1);\n  }else if (tags.length == 1) {\n      return getErrorObject('InvalidTag', \"Unclosed tag '\"+tags[0].tagName+\"'.\", getLineNumberForPosition(xmlData, tags[0].tagStartPos));\n  }else if (tags.length > 0) {\n      return getErrorObject('InvalidXml', \"Invalid '\"+\n          JSON.stringify(tags.map(t => t.tagName), null, 4).replace(/\\r?\\n/g, '')+\n          \"' found.\", {line: 1, col: 1});\n  }\n\n  return true;\n};\n\nfunction isWhiteSpace(char){\n  return char === ' ' || char === '\\t' || char === '\\n'  || char === '\\r';\n}\n/**\n * Read Processing insstructions and skip\n * @param {*} xmlData\n * @param {*} i\n */\nfunction readPI(xmlData, i) {\n  const start = i;\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] == '?' || xmlData[i] == ' ') {\n      //tagname\n      const tagname = xmlData.substr(start, i - start);\n      if (i > 5 && tagname === 'xml') {\n        return getErrorObject('InvalidXml', 'XML declaration allowed only at the start of the document.', getLineNumberForPosition(xmlData, i));\n      } else if (xmlData[i] == '?' && xmlData[i + 1] == '>') {\n        //check if valid attribut string\n        i++;\n        break;\n      } else {\n        continue;\n      }\n    }\n  }\n  return i;\n}\n\nfunction readCommentAndCDATA(xmlData, i) {\n  if (xmlData.length > i + 5 && xmlData[i + 1] === '-' && xmlData[i + 2] === '-') {\n    //comment\n    for (i += 3; i < xmlData.length; i++) {\n      if (xmlData[i] === '-' && xmlData[i + 1] === '-' && xmlData[i + 2] === '>') {\n        i += 2;\n        break;\n      }\n    }\n  } else if (\n    xmlData.length > i + 8 &&\n    xmlData[i + 1] === 'D' &&\n    xmlData[i + 2] === 'O' &&\n    xmlData[i + 3] === 'C' &&\n    xmlData[i + 4] === 'T' &&\n    xmlData[i + 5] === 'Y' &&\n    xmlData[i + 6] === 'P' &&\n    xmlData[i + 7] === 'E'\n  ) {\n    let angleBracketsCount = 1;\n    for (i += 8; i < xmlData.length; i++) {\n      if (xmlData[i] === '<') {\n        angleBracketsCount++;\n      } else if (xmlData[i] === '>') {\n        angleBracketsCount--;\n        if (angleBracketsCount === 0) {\n          break;\n        }\n      }\n    }\n  } else if (\n    xmlData.length > i + 9 &&\n    xmlData[i + 1] === '[' &&\n    xmlData[i + 2] === 'C' &&\n    xmlData[i + 3] === 'D' &&\n    xmlData[i + 4] === 'A' &&\n    xmlData[i + 5] === 'T' &&\n    xmlData[i + 6] === 'A' &&\n    xmlData[i + 7] === '['\n  ) {\n    for (i += 8; i < xmlData.length; i++) {\n      if (xmlData[i] === ']' && xmlData[i + 1] === ']' && xmlData[i + 2] === '>') {\n        i += 2;\n        break;\n      }\n    }\n  }\n\n  return i;\n}\n\nconst doubleQuote = '\"';\nconst singleQuote = \"'\";\n\n/**\n * Keep reading xmlData until '<' is found outside the attribute value.\n * @param {string} xmlData\n * @param {number} i\n */\nfunction readAttributeStr(xmlData, i) {\n  let attrStr = '';\n  let startChar = '';\n  let tagClosed = false;\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] === doubleQuote || xmlData[i] === singleQuote) {\n      if (startChar === '') {\n        startChar = xmlData[i];\n      } else if (startChar !== xmlData[i]) {\n        //if vaue is enclosed with double quote then single quotes are allowed inside the value and vice versa\n      } else {\n        startChar = '';\n      }\n    } else if (xmlData[i] === '>') {\n      if (startChar === '') {\n        tagClosed = true;\n        break;\n      }\n    }\n    attrStr += xmlData[i];\n  }\n  if (startChar !== '') {\n    return false;\n  }\n\n  return {\n    value: attrStr,\n    index: i,\n    tagClosed: tagClosed\n  };\n}\n\n/**\n * Select all the attributes whether valid or invalid.\n */\nconst validAttrStrRegxp = new RegExp('(\\\\s*)([^\\\\s=]+)(\\\\s*=)?(\\\\s*([\\'\"])(([\\\\s\\\\S])*?)\\\\5)?', 'g');\n\n//attr, =\"sd\", a=\"amit's\", a=\"sd\"b=\"saf\", ab  cd=\"\"\n\nfunction validateAttributeString(attrStr, options) {\n  //console.log(\"start:\"+attrStr+\":end\");\n\n  //if(attrStr.trim().length === 0) return true; //empty string\n\n  const matches = util.getAllMatches(attrStr, validAttrStrRegxp);\n  const attrNames = {};\n\n  for (let i = 0; i < matches.length; i++) {\n    if (matches[i][1].length === 0) {\n      //nospace before attribute name: a=\"sd\"b=\"saf\"\n      return getErrorObject('InvalidAttr', \"Attribute '\"+matches[i][2]+\"' has no space in starting.\", getPositionFromMatch(matches[i]))\n    } else if (matches[i][3] !== undefined && matches[i][4] === undefined) {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+matches[i][2]+\"' is without value.\", getPositionFromMatch(matches[i]));\n    } else if (matches[i][3] === undefined && !options.allowBooleanAttributes) {\n      //independent attribute: ab\n      return getErrorObject('InvalidAttr', \"boolean attribute '\"+matches[i][2]+\"' is not allowed.\", getPositionFromMatch(matches[i]));\n    }\n    /* else if(matches[i][6] === undefined){//attribute without value: ab=\n                    return { err: { code:\"InvalidAttr\",msg:\"attribute \" + matches[i][2] + \" has no value assigned.\"}};\n                } */\n    const attrName = matches[i][2];\n    if (!validateAttrName(attrName)) {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+attrName+\"' is an invalid name.\", getPositionFromMatch(matches[i]));\n    }\n    if (!attrNames.hasOwnProperty(attrName)) {\n      //check for duplicate attribute.\n      attrNames[attrName] = 1;\n    } else {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+attrName+\"' is repeated.\", getPositionFromMatch(matches[i]));\n    }\n  }\n\n  return true;\n}\n\nfunction validateNumberAmpersand(xmlData, i) {\n  let re = /\\d/;\n  if (xmlData[i] === 'x') {\n    i++;\n    re = /[\\da-fA-F]/;\n  }\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] === ';')\n      return i;\n    if (!xmlData[i].match(re))\n      break;\n  }\n  return -1;\n}\n\nfunction validateAmpersand(xmlData, i) {\n  // https://www.w3.org/TR/xml/#dt-charref\n  i++;\n  if (xmlData[i] === ';')\n    return -1;\n  if (xmlData[i] === '#') {\n    i++;\n    return validateNumberAmpersand(xmlData, i);\n  }\n  let count = 0;\n  for (; i < xmlData.length; i++, count++) {\n    if (xmlData[i].match(/\\w/) && count < 20)\n      continue;\n    if (xmlData[i] === ';')\n      break;\n    return -1;\n  }\n  return i;\n}\n\nfunction getErrorObject(code, message, lineNumber) {\n  return {\n    err: {\n      code: code,\n      msg: message,\n      line: lineNumber.line || lineNumber,\n      col: lineNumber.col,\n    },\n  };\n}\n\nfunction validateAttrName(attrName) {\n  return util.isName(attrName);\n}\n\n// const startsWithXML = /^xml/i;\n\nfunction validateTagName(tagname) {\n  return util.isName(tagname) /* && !tagname.match(startsWithXML) */;\n}\n\n//this function returns the line number for the character at the given index\nfunction getLineNumberForPosition(xmlData, index) {\n  const lines = xmlData.substring(0, index).split(/\\r?\\n/);\n  return {\n    line: lines.length,\n\n    // column number is last line's length + 1, because column numbering starts at 1:\n    col: lines[lines.length - 1].length + 1\n  };\n}\n\n//this function returns the position of the first character of match within attrStr\nfunction getPositionFromMatch(match) {\n  return match.startIndex + match[1].length;\n}\n","\nconst defaultOptions = {\n    preserveOrder: false,\n    attributeNamePrefix: '@_',\n    attributesGroupName: false,\n    textNodeName: '#text',\n    ignoreAttributes: true,\n    removeNSPrefix: false, // remove NS from tag name or attribute name if true\n    allowBooleanAttributes: false, //a tag can have attributes without any value\n    //ignoreRootElement : false,\n    parseTagValue: true,\n    parseAttributeValue: false,\n    trimValues: true, //Trim string values of tag and attributes\n    cdataPropName: false,\n    numberParseOptions: {\n      hex: true,\n      leadingZeros: true,\n      eNotation: true\n    },\n    tagValueProcessor: function(tagName, val) {\n      return val;\n    },\n    attributeValueProcessor: function(attrName, val) {\n      return val;\n    },\n    stopNodes: [], //nested tags will not be parsed even for errors\n    alwaysCreateTextNode: false,\n    isArray: () => false,\n    commentPropName: false,\n    unpairedTags: [],\n    processEntities: true,\n    htmlEntities: false,\n    ignoreDeclaration: false,\n    ignorePiTags: false,\n    transformTagName: false,\n    transformAttributeName: false,\n    updateTag: function(tagName, jPath, attrs){\n      return tagName\n    },\n    // skipEmptyListItem: false\n};\n   \nconst buildOptions = function(options) {\n    return Object.assign({}, defaultOptions, options);\n};\n\nexports.buildOptions = buildOptions;\nexports.defaultOptions = defaultOptions;","'use strict';\n\nclass XmlNode{\n  constructor(tagname) {\n    this.tagname = tagname;\n    this.child = []; //nested tags, text, cdata, comments in order\n    this[\":@\"] = {}; //attributes map\n  }\n  add(key,val){\n    // this.child.push( {name : key, val: val, isCdata: isCdata });\n    if(key === \"__proto__\") key = \"#__proto__\";\n    this.child.push( {[key]: val });\n  }\n  addChild(node) {\n    if(node.tagname === \"__proto__\") node.tagname = \"#__proto__\";\n    if(node[\":@\"] && Object.keys(node[\":@\"]).length > 0){\n      this.child.push( { [node.tagname]: node.child, [\":@\"]: node[\":@\"] });\n    }else{\n      this.child.push( { [node.tagname]: node.child });\n    }\n  };\n};\n\n\nmodule.exports = XmlNode;","const util = require('../util');\n\n//TODO: handle comments\nfunction readDocType(xmlData, i){\n    \n    const entities = {};\n    if( xmlData[i + 3] === 'O' &&\n         xmlData[i + 4] === 'C' &&\n         xmlData[i + 5] === 'T' &&\n         xmlData[i + 6] === 'Y' &&\n         xmlData[i + 7] === 'P' &&\n         xmlData[i + 8] === 'E')\n    {    \n        i = i+9;\n        let angleBracketsCount = 1;\n        let hasBody = false, comment = false;\n        let exp = \"\";\n        for(;i<xmlData.length;i++){\n            if (xmlData[i] === '<' && !comment) { //Determine the tag type\n                if( hasBody && isEntity(xmlData, i)){\n                    i += 7; \n                    let entityName, val;\n                    [entityName, val,i] = readEntityExp(xmlData,i+1);\n                    if(val.indexOf(\"&\") === -1) //Parameter entities are not supported\n                        entities[ validateEntityName(entityName) ] = {\n                            regx : RegExp( `&${entityName};`,\"g\"),\n                            val: val\n                        };\n                }\n                else if( hasBody && isElement(xmlData, i))  i += 8;//Not supported\n                else if( hasBody && isAttlist(xmlData, i))  i += 8;//Not supported\n                else if( hasBody && isNotation(xmlData, i)) i += 9;//Not supported\n                else if( isComment)                         comment = true;\n                else                                        throw new Error(\"Invalid DOCTYPE\");\n\n                angleBracketsCount++;\n                exp = \"\";\n            } else if (xmlData[i] === '>') { //Read tag content\n                if(comment){\n                    if( xmlData[i - 1] === \"-\" && xmlData[i - 2] === \"-\"){\n                        comment = false;\n                        angleBracketsCount--;\n                    }\n                }else{\n                    angleBracketsCount--;\n                }\n                if (angleBracketsCount === 0) {\n                  break;\n                }\n            }else if( xmlData[i] === '['){\n                hasBody = true;\n            }else{\n                exp += xmlData[i];\n            }\n        }\n        if(angleBracketsCount !== 0){\n            throw new Error(`Unclosed DOCTYPE`);\n        }\n    }else{\n        throw new Error(`Invalid Tag instead of DOCTYPE`);\n    }\n    return {entities, i};\n}\n\nfunction readEntityExp(xmlData,i){\n    //External entities are not supported\n    //    <!ENTITY ext SYSTEM \"http://normal-website.com\" >\n\n    //Parameter entities are not supported\n    //    <!ENTITY entityname \"&anotherElement;\">\n\n    //Internal entities are supported\n    //    <!ENTITY entityname \"replacement text\">\n    \n    //read EntityName\n    let entityName = \"\";\n    for (; i < xmlData.length && (xmlData[i] !== \"'\" && xmlData[i] !== '\"' ); i++) {\n        // if(xmlData[i] === \" \") continue;\n        // else \n        entityName += xmlData[i];\n    }\n    entityName = entityName.trim();\n    if(entityName.indexOf(\" \") !== -1) throw new Error(\"External entites are not supported\");\n\n    //read Entity Value\n    const startChar = xmlData[i++];\n    let val = \"\"\n    for (; i < xmlData.length && xmlData[i] !== startChar ; i++) {\n        val += xmlData[i];\n    }\n    return [entityName, val, i];\n}\n\nfunction isComment(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === '-' &&\n    xmlData[i+3] === '-') return true\n    return false\n}\nfunction isEntity(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'E' &&\n    xmlData[i+3] === 'N' &&\n    xmlData[i+4] === 'T' &&\n    xmlData[i+5] === 'I' &&\n    xmlData[i+6] === 'T' &&\n    xmlData[i+7] === 'Y') return true\n    return false\n}\nfunction isElement(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'E' &&\n    xmlData[i+3] === 'L' &&\n    xmlData[i+4] === 'E' &&\n    xmlData[i+5] === 'M' &&\n    xmlData[i+6] === 'E' &&\n    xmlData[i+7] === 'N' &&\n    xmlData[i+8] === 'T') return true\n    return false\n}\n\nfunction isAttlist(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'A' &&\n    xmlData[i+3] === 'T' &&\n    xmlData[i+4] === 'T' &&\n    xmlData[i+5] === 'L' &&\n    xmlData[i+6] === 'I' &&\n    xmlData[i+7] === 'S' &&\n    xmlData[i+8] === 'T') return true\n    return false\n}\nfunction isNotation(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'N' &&\n    xmlData[i+3] === 'O' &&\n    xmlData[i+4] === 'T' &&\n    xmlData[i+5] === 'A' &&\n    xmlData[i+6] === 'T' &&\n    xmlData[i+7] === 'I' &&\n    xmlData[i+8] === 'O' &&\n    xmlData[i+9] === 'N') return true\n    return false\n}\n\nfunction validateEntityName(name){\n    if (util.isName(name))\n\treturn name;\n    else\n        throw new Error(`Invalid entity name ${name}`);\n}\n\nmodule.exports = readDocType;\n","const hexRegex = /^[-+]?0x[a-fA-F0-9]+$/;\nconst numRegex = /^([\\-\\+])?(0*)(\\.[0-9]+([eE]\\-?[0-9]+)?|[0-9]+(\\.[0-9]+([eE]\\-?[0-9]+)?)?)$/;\n// const octRegex = /0x[a-z0-9]+/;\n// const binRegex = /0x[a-z0-9]+/;\n\n\n//polyfill\nif (!Number.parseInt && window.parseInt) {\n    Number.parseInt = window.parseInt;\n}\nif (!Number.parseFloat && window.parseFloat) {\n    Number.parseFloat = window.parseFloat;\n}\n\n  \nconst consider = {\n    hex :  true,\n    leadingZeros: true,\n    decimalPoint: \"\\.\",\n    eNotation: true\n    //skipLike: /regex/\n};\n\nfunction toNumber(str, options = {}){\n    // const options = Object.assign({}, consider);\n    // if(opt.leadingZeros === false){\n    //     options.leadingZeros = false;\n    // }else if(opt.hex === false){\n    //     options.hex = false;\n    // }\n\n    options = Object.assign({}, consider, options );\n    if(!str || typeof str !== \"string\" ) return str;\n    \n    let trimmedStr  = str.trim();\n    // if(trimmedStr === \"0.0\") return 0;\n    // else if(trimmedStr === \"+0.0\") return 0;\n    // else if(trimmedStr === \"-0.0\") return -0;\n\n    if(options.skipLike !== undefined && options.skipLike.test(trimmedStr)) return str;\n    else if (options.hex && hexRegex.test(trimmedStr)) {\n        return Number.parseInt(trimmedStr, 16);\n    // } else if (options.parseOct && octRegex.test(str)) {\n    //     return Number.parseInt(val, 8);\n    // }else if (options.parseBin && binRegex.test(str)) {\n    //     return Number.parseInt(val, 2);\n    }else{\n        //separate negative sign, leading zeros, and rest number\n        const match = numRegex.exec(trimmedStr);\n        if(match){\n            const sign = match[1];\n            const leadingZeros = match[2];\n            let numTrimmedByZeros = trimZeros(match[3]); //complete num without leading zeros\n            //trim ending zeros for floating number\n            \n            const eNotation = match[4] || match[6];\n            if(!options.leadingZeros && leadingZeros.length > 0 && sign && trimmedStr[2] !== \".\") return str; //-0123\n            else if(!options.leadingZeros && leadingZeros.length > 0 && !sign && trimmedStr[1] !== \".\") return str; //0123\n            else{//no leading zeros or leading zeros are allowed\n                const num = Number(trimmedStr);\n                const numStr = \"\" + num;\n                if(numStr.search(/[eE]/) !== -1){ //given number is long and parsed to eNotation\n                    if(options.eNotation) return num;\n                    else return str;\n                }else if(eNotation){ //given number has enotation\n                    if(options.eNotation) return num;\n                    else return str;\n                }else if(trimmedStr.indexOf(\".\") !== -1){ //floating number\n                    // const decimalPart = match[5].substr(1);\n                    // const intPart = trimmedStr.substr(0,trimmedStr.indexOf(\".\"));\n\n                    \n                    // const p = numStr.indexOf(\".\");\n                    // const givenIntPart = numStr.substr(0,p);\n                    // const givenDecPart = numStr.substr(p+1);\n                    if(numStr === \"0\" && (numTrimmedByZeros === \"\") ) return num; //0.0\n                    else if(numStr === numTrimmedByZeros) return num; //0.456. 0.79000\n                    else if( sign && numStr === \"-\"+numTrimmedByZeros) return num;\n                    else return str;\n                }\n                \n                if(leadingZeros){\n                    // if(numTrimmedByZeros === numStr){\n                    //     if(options.leadingZeros) return num;\n                    //     else return str;\n                    // }else return str;\n                    if(numTrimmedByZeros === numStr) return num;\n                    else if(sign+numTrimmedByZeros === numStr) return num;\n                    else return str;\n                }\n\n                if(trimmedStr === numStr) return num;\n                else if(trimmedStr === sign+numStr) return num;\n                // else{\n                //     //number with +/- sign\n                //     trimmedStr.test(/[-+][0-9]);\n\n                // }\n                return str;\n            }\n            // else if(!eNotation && trimmedStr && trimmedStr !== Number(trimmedStr) ) return str;\n            \n        }else{ //non-numeric string\n            return str;\n        }\n    }\n}\n\n/**\n * \n * @param {string} numStr without leading zeros\n * @returns \n */\nfunction trimZeros(numStr){\n    if(numStr && numStr.indexOf(\".\") !== -1){//float\n        numStr = numStr.replace(/0+$/, \"\"); //remove ending zeros\n        if(numStr === \".\")  numStr = \"0\";\n        else if(numStr[0] === \".\")  numStr = \"0\"+numStr;\n        else if(numStr[numStr.length-1] === \".\")  numStr = numStr.substr(0,numStr.length-1);\n        return numStr;\n    }\n    return numStr;\n}\nmodule.exports = toNumber\n","function getIgnoreAttributesFn(ignoreAttributes) {\n    if (typeof ignoreAttributes === 'function') {\n        return ignoreAttributes\n    }\n    if (Array.isArray(ignoreAttributes)) {\n        return (attrName) => {\n            for (const pattern of ignoreAttributes) {\n                if (typeof pattern === 'string' && attrName === pattern) {\n                    return true\n                }\n                if (pattern instanceof RegExp && pattern.test(attrName)) {\n                    return true\n                }\n            }\n        }\n    }\n    return () => false\n}\n\nmodule.exports = getIgnoreAttributesFn","'use strict';\n///@ts-check\n\nconst util = require('../util');\nconst xmlNode = require('./xmlNode');\nconst readDocType = require(\"./DocTypeReader\");\nconst toNumber = require(\"strnum\");\nconst getIgnoreAttributesFn = require('../ignoreAttributes')\n\n// const regx =\n//   '<((!\\\\[CDATA\\\\[([\\\\s\\\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\\\/)(NAME)\\\\s*>))([^<]*)'\n//   .replace(/NAME/g, util.nameRegexp);\n\n//const tagsRegx = new RegExp(\"<(\\\\/?[\\\\w:\\\\-\\._]+)([^>]*)>(\\\\s*\"+cdataRegx+\")*([^<]+)?\",\"g\");\n//const tagsRegx = new RegExp(\"<(\\\\/?)((\\\\w*:)?([\\\\w:\\\\-\\._]+))([^>]*)>([^<]*)(\"+cdataRegx+\"([^<]*))*([^<]+)?\",\"g\");\n\nclass OrderedObjParser{\n  constructor(options){\n    this.options = options;\n    this.currentNode = null;\n    this.tagsNodeStack = [];\n    this.docTypeEntities = {};\n    this.lastEntities = {\n      \"apos\" : { regex: /&(apos|#39|#x27);/g, val : \"'\"},\n      \"gt\" : { regex: /&(gt|#62|#x3E);/g, val : \">\"},\n      \"lt\" : { regex: /&(lt|#60|#x3C);/g, val : \"<\"},\n      \"quot\" : { regex: /&(quot|#34|#x22);/g, val : \"\\\"\"},\n    };\n    this.ampEntity = { regex: /&(amp|#38|#x26);/g, val : \"&\"};\n    this.htmlEntities = {\n      \"space\": { regex: /&(nbsp|#160);/g, val: \" \" },\n      // \"lt\" : { regex: /&(lt|#60);/g, val: \"<\" },\n      // \"gt\" : { regex: /&(gt|#62);/g, val: \">\" },\n      // \"amp\" : { regex: /&(amp|#38);/g, val: \"&\" },\n      // \"quot\" : { regex: /&(quot|#34);/g, val: \"\\\"\" },\n      // \"apos\" : { regex: /&(apos|#39);/g, val: \"'\" },\n      \"cent\" : { regex: /&(cent|#162);/g, val: \"\" },\n      \"pound\" : { regex: /&(pound|#163);/g, val: \"\" },\n      \"yen\" : { regex: /&(yen|#165);/g, val: \"\" },\n      \"euro\" : { regex: /&(euro|#8364);/g, val: \"\" },\n      \"copyright\" : { regex: /&(copy|#169);/g, val: \"\" },\n      \"reg\" : { regex: /&(reg|#174);/g, val: \"\" },\n      \"inr\" : { regex: /&(inr|#8377);/g, val: \"\" },\n      \"num_dec\": { regex: /&#([0-9]{1,7});/g, val : (_, str) => String.fromCharCode(Number.parseInt(str, 10)) },\n      \"num_hex\": { regex: /&#x([0-9a-fA-F]{1,6});/g, val : (_, str) => String.fromCharCode(Number.parseInt(str, 16)) },\n    };\n    this.addExternalEntities = addExternalEntities;\n    this.parseXml = parseXml;\n    this.parseTextData = parseTextData;\n    this.resolveNameSpace = resolveNameSpace;\n    this.buildAttributesMap = buildAttributesMap;\n    this.isItStopNode = isItStopNode;\n    this.replaceEntitiesValue = replaceEntitiesValue;\n    this.readStopNodeData = readStopNodeData;\n    this.saveTextToParentTag = saveTextToParentTag;\n    this.addChild = addChild;\n    this.ignoreAttributesFn = getIgnoreAttributesFn(this.options.ignoreAttributes)\n  }\n\n}\n\nfunction addExternalEntities(externalEntities){\n  const entKeys = Object.keys(externalEntities);\n  for (let i = 0; i < entKeys.length; i++) {\n    const ent = entKeys[i];\n    this.lastEntities[ent] = {\n       regex: new RegExp(\"&\"+ent+\";\",\"g\"),\n       val : externalEntities[ent]\n    }\n  }\n}\n\n/**\n * @param {string} val\n * @param {string} tagName\n * @param {string} jPath\n * @param {boolean} dontTrim\n * @param {boolean} hasAttributes\n * @param {boolean} isLeafNode\n * @param {boolean} escapeEntities\n */\nfunction parseTextData(val, tagName, jPath, dontTrim, hasAttributes, isLeafNode, escapeEntities) {\n  if (val !== undefined) {\n    if (this.options.trimValues && !dontTrim) {\n      val = val.trim();\n    }\n    if(val.length > 0){\n      if(!escapeEntities) val = this.replaceEntitiesValue(val);\n      \n      const newval = this.options.tagValueProcessor(tagName, val, jPath, hasAttributes, isLeafNode);\n      if(newval === null || newval === undefined){\n        //don't parse\n        return val;\n      }else if(typeof newval !== typeof val || newval !== val){\n        //overwrite\n        return newval;\n      }else if(this.options.trimValues){\n        return parseValue(val, this.options.parseTagValue, this.options.numberParseOptions);\n      }else{\n        const trimmedVal = val.trim();\n        if(trimmedVal === val){\n          return parseValue(val, this.options.parseTagValue, this.options.numberParseOptions);\n        }else{\n          return val;\n        }\n      }\n    }\n  }\n}\n\nfunction resolveNameSpace(tagname) {\n  if (this.options.removeNSPrefix) {\n    const tags = tagname.split(':');\n    const prefix = tagname.charAt(0) === '/' ? '/' : '';\n    if (tags[0] === 'xmlns') {\n      return '';\n    }\n    if (tags.length === 2) {\n      tagname = prefix + tags[1];\n    }\n  }\n  return tagname;\n}\n\n//TODO: change regex to capture NS\n//const attrsRegx = new RegExp(\"([\\\\w\\\\-\\\\.\\\\:]+)\\\\s*=\\\\s*(['\\\"])((.|\\n)*?)\\\\2\",\"gm\");\nconst attrsRegx = new RegExp('([^\\\\s=]+)\\\\s*(=\\\\s*([\\'\"])([\\\\s\\\\S]*?)\\\\3)?', 'gm');\n\nfunction buildAttributesMap(attrStr, jPath, tagName) {\n  if (this.options.ignoreAttributes !== true && typeof attrStr === 'string') {\n    // attrStr = attrStr.replace(/\\r?\\n/g, ' ');\n    //attrStr = attrStr || attrStr.trim();\n\n    const matches = util.getAllMatches(attrStr, attrsRegx);\n    const len = matches.length; //don't make it inline\n    const attrs = {};\n    for (let i = 0; i < len; i++) {\n      const attrName = this.resolveNameSpace(matches[i][1]);\n      if (this.ignoreAttributesFn(attrName, jPath)) {\n        continue\n      }\n      let oldVal = matches[i][4];\n      let aName = this.options.attributeNamePrefix + attrName;\n      if (attrName.length) {\n        if (this.options.transformAttributeName) {\n          aName = this.options.transformAttributeName(aName);\n        }\n        if(aName === \"__proto__\") aName  = \"#__proto__\";\n        if (oldVal !== undefined) {\n          if (this.options.trimValues) {\n            oldVal = oldVal.trim();\n          }\n          oldVal = this.replaceEntitiesValue(oldVal);\n          const newVal = this.options.attributeValueProcessor(attrName, oldVal, jPath);\n          if(newVal === null || newVal === undefined){\n            //don't parse\n            attrs[aName] = oldVal;\n          }else if(typeof newVal !== typeof oldVal || newVal !== oldVal){\n            //overwrite\n            attrs[aName] = newVal;\n          }else{\n            //parse\n            attrs[aName] = parseValue(\n              oldVal,\n              this.options.parseAttributeValue,\n              this.options.numberParseOptions\n            );\n          }\n        } else if (this.options.allowBooleanAttributes) {\n          attrs[aName] = true;\n        }\n      }\n    }\n    if (!Object.keys(attrs).length) {\n      return;\n    }\n    if (this.options.attributesGroupName) {\n      const attrCollection = {};\n      attrCollection[this.options.attributesGroupName] = attrs;\n      return attrCollection;\n    }\n    return attrs\n  }\n}\n\nconst parseXml = function(xmlData) {\n  xmlData = xmlData.replace(/\\r\\n?/g, \"\\n\"); //TODO: remove this line\n  const xmlObj = new xmlNode('!xml');\n  let currentNode = xmlObj;\n  let textData = \"\";\n  let jPath = \"\";\n  for(let i=0; i< xmlData.length; i++){//for each char in XML data\n    const ch = xmlData[i];\n    if(ch === '<'){\n      // const nextIndex = i+1;\n      // const _2ndChar = xmlData[nextIndex];\n      if( xmlData[i+1] === '/') {//Closing Tag\n        const closeIndex = findClosingIndex(xmlData, \">\", i, \"Closing Tag is not closed.\")\n        let tagName = xmlData.substring(i+2,closeIndex).trim();\n\n        if(this.options.removeNSPrefix){\n          const colonIndex = tagName.indexOf(\":\");\n          if(colonIndex !== -1){\n            tagName = tagName.substr(colonIndex+1);\n          }\n        }\n\n        if(this.options.transformTagName) {\n          tagName = this.options.transformTagName(tagName);\n        }\n\n        if(currentNode){\n          textData = this.saveTextToParentTag(textData, currentNode, jPath);\n        }\n\n        //check if last tag of nested tag was unpaired tag\n        const lastTagName = jPath.substring(jPath.lastIndexOf(\".\")+1);\n        if(tagName && this.options.unpairedTags.indexOf(tagName) !== -1 ){\n          throw new Error(`Unpaired tag can not be used as closing tag: </${tagName}>`);\n        }\n        let propIndex = 0\n        if(lastTagName && this.options.unpairedTags.indexOf(lastTagName) !== -1 ){\n          propIndex = jPath.lastIndexOf('.', jPath.lastIndexOf('.')-1)\n          this.tagsNodeStack.pop();\n        }else{\n          propIndex = jPath.lastIndexOf(\".\");\n        }\n        jPath = jPath.substring(0, propIndex);\n\n        currentNode = this.tagsNodeStack.pop();//avoid recursion, set the parent tag scope\n        textData = \"\";\n        i = closeIndex;\n      } else if( xmlData[i+1] === '?') {\n\n        let tagData = readTagExp(xmlData,i, false, \"?>\");\n        if(!tagData) throw new Error(\"Pi Tag is not closed.\");\n\n        textData = this.saveTextToParentTag(textData, currentNode, jPath);\n        if( (this.options.ignoreDeclaration && tagData.tagName === \"?xml\") || this.options.ignorePiTags){\n\n        }else{\n  \n          const childNode = new xmlNode(tagData.tagName);\n          childNode.add(this.options.textNodeName, \"\");\n          \n          if(tagData.tagName !== tagData.tagExp && tagData.attrExpPresent){\n            childNode[\":@\"] = this.buildAttributesMap(tagData.tagExp, jPath, tagData.tagName);\n          }\n          this.addChild(currentNode, childNode, jPath)\n\n        }\n\n\n        i = tagData.closeIndex + 1;\n      } else if(xmlData.substr(i + 1, 3) === '!--') {\n        const endIndex = findClosingIndex(xmlData, \"-->\", i+4, \"Comment is not closed.\")\n        if(this.options.commentPropName){\n          const comment = xmlData.substring(i + 4, endIndex - 2);\n\n          textData = this.saveTextToParentTag(textData, currentNode, jPath);\n\n          currentNode.add(this.options.commentPropName, [ { [this.options.textNodeName] : comment } ]);\n        }\n        i = endIndex;\n      } else if( xmlData.substr(i + 1, 2) === '!D') {\n        const result = readDocType(xmlData, i);\n        this.docTypeEntities = result.entities;\n        i = result.i;\n      }else if(xmlData.substr(i + 1, 2) === '![') {\n        const closeIndex = findClosingIndex(xmlData, \"]]>\", i, \"CDATA is not closed.\") - 2;\n        const tagExp = xmlData.substring(i + 9,closeIndex);\n\n        textData = this.saveTextToParentTag(textData, currentNode, jPath);\n\n        let val = this.parseTextData(tagExp, currentNode.tagname, jPath, true, false, true, true);\n        if(val == undefined) val = \"\";\n\n        //cdata should be set even if it is 0 length string\n        if(this.options.cdataPropName){\n          currentNode.add(this.options.cdataPropName, [ { [this.options.textNodeName] : tagExp } ]);\n        }else{\n          currentNode.add(this.options.textNodeName, val);\n        }\n        \n        i = closeIndex + 2;\n      }else {//Opening tag\n        let result = readTagExp(xmlData,i, this.options.removeNSPrefix);\n        let tagName= result.tagName;\n        const rawTagName = result.rawTagName;\n        let tagExp = result.tagExp;\n        let attrExpPresent = result.attrExpPresent;\n        let closeIndex = result.closeIndex;\n\n        if (this.options.transformTagName) {\n          tagName = this.options.transformTagName(tagName);\n        }\n        \n        //save text as child node\n        if (currentNode && textData) {\n          if(currentNode.tagname !== '!xml'){\n            //when nested tag is found\n            textData = this.saveTextToParentTag(textData, currentNode, jPath, false);\n          }\n        }\n\n        //check if last tag was unpaired tag\n        const lastTag = currentNode;\n        if(lastTag && this.options.unpairedTags.indexOf(lastTag.tagname) !== -1 ){\n          currentNode = this.tagsNodeStack.pop();\n          jPath = jPath.substring(0, jPath.lastIndexOf(\".\"));\n        }\n        if(tagName !== xmlObj.tagname){\n          jPath += jPath ? \".\" + tagName : tagName;\n        }\n        if (this.isItStopNode(this.options.stopNodes, jPath, tagName)) {\n          let tagContent = \"\";\n          //self-closing tag\n          if(tagExp.length > 0 && tagExp.lastIndexOf(\"/\") === tagExp.length - 1){\n            if(tagName[tagName.length - 1] === \"/\"){ //remove trailing '/'\n              tagName = tagName.substr(0, tagName.length - 1);\n              jPath = jPath.substr(0, jPath.length - 1);\n              tagExp = tagName;\n            }else{\n              tagExp = tagExp.substr(0, tagExp.length - 1);\n            }\n            i = result.closeIndex;\n          }\n          //unpaired tag\n          else if(this.options.unpairedTags.indexOf(tagName) !== -1){\n            \n            i = result.closeIndex;\n          }\n          //normal tag\n          else{\n            //read until closing tag is found\n            const result = this.readStopNodeData(xmlData, rawTagName, closeIndex + 1);\n            if(!result) throw new Error(`Unexpected end of ${rawTagName}`);\n            i = result.i;\n            tagContent = result.tagContent;\n          }\n\n          const childNode = new xmlNode(tagName);\n          if(tagName !== tagExp && attrExpPresent){\n            childNode[\":@\"] = this.buildAttributesMap(tagExp, jPath, tagName);\n          }\n          if(tagContent) {\n            tagContent = this.parseTextData(tagContent, tagName, jPath, true, attrExpPresent, true, true);\n          }\n          \n          jPath = jPath.substr(0, jPath.lastIndexOf(\".\"));\n          childNode.add(this.options.textNodeName, tagContent);\n          \n          this.addChild(currentNode, childNode, jPath)\n        }else{\n  //selfClosing tag\n          if(tagExp.length > 0 && tagExp.lastIndexOf(\"/\") === tagExp.length - 1){\n            if(tagName[tagName.length - 1] === \"/\"){ //remove trailing '/'\n              tagName = tagName.substr(0, tagName.length - 1);\n              jPath = jPath.substr(0, jPath.length - 1);\n              tagExp = tagName;\n            }else{\n              tagExp = tagExp.substr(0, tagExp.length - 1);\n            }\n            \n            if(this.options.transformTagName) {\n              tagName = this.options.transformTagName(tagName);\n            }\n\n            const childNode = new xmlNode(tagName);\n            if(tagName !== tagExp && attrExpPresent){\n              childNode[\":@\"] = this.buildAttributesMap(tagExp, jPath, tagName);\n            }\n            this.addChild(currentNode, childNode, jPath)\n            jPath = jPath.substr(0, jPath.lastIndexOf(\".\"));\n          }\n    //opening tag\n          else{\n            const childNode = new xmlNode( tagName);\n            this.tagsNodeStack.push(currentNode);\n            \n            if(tagName !== tagExp && attrExpPresent){\n              childNode[\":@\"] = this.buildAttributesMap(tagExp, jPath, tagName);\n            }\n            this.addChild(currentNode, childNode, jPath)\n            currentNode = childNode;\n          }\n          textData = \"\";\n          i = closeIndex;\n        }\n      }\n    }else{\n      textData += xmlData[i];\n    }\n  }\n  return xmlObj.child;\n}\n\nfunction addChild(currentNode, childNode, jPath){\n  const result = this.options.updateTag(childNode.tagname, jPath, childNode[\":@\"])\n  if(result === false){\n  }else if(typeof result === \"string\"){\n    childNode.tagname = result\n    currentNode.addChild(childNode);\n  }else{\n    currentNode.addChild(childNode);\n  }\n}\n\nconst replaceEntitiesValue = function(val){\n\n  if(this.options.processEntities){\n    for(let entityName in this.docTypeEntities){\n      const entity = this.docTypeEntities[entityName];\n      val = val.replace( entity.regx, entity.val);\n    }\n    for(let entityName in this.lastEntities){\n      const entity = this.lastEntities[entityName];\n      val = val.replace( entity.regex, entity.val);\n    }\n    if(this.options.htmlEntities){\n      for(let entityName in this.htmlEntities){\n        const entity = this.htmlEntities[entityName];\n        val = val.replace( entity.regex, entity.val);\n      }\n    }\n    val = val.replace( this.ampEntity.regex, this.ampEntity.val);\n  }\n  return val;\n}\nfunction saveTextToParentTag(textData, currentNode, jPath, isLeafNode) {\n  if (textData) { //store previously collected data as textNode\n    if(isLeafNode === undefined) isLeafNode = Object.keys(currentNode.child).length === 0\n    \n    textData = this.parseTextData(textData,\n      currentNode.tagname,\n      jPath,\n      false,\n      currentNode[\":@\"] ? Object.keys(currentNode[\":@\"]).length !== 0 : false,\n      isLeafNode);\n\n    if (textData !== undefined && textData !== \"\")\n      currentNode.add(this.options.textNodeName, textData);\n    textData = \"\";\n  }\n  return textData;\n}\n\n//TODO: use jPath to simplify the logic\n/**\n * \n * @param {string[]} stopNodes \n * @param {string} jPath\n * @param {string} currentTagName \n */\nfunction isItStopNode(stopNodes, jPath, currentTagName){\n  const allNodesExp = \"*.\" + currentTagName;\n  for (const stopNodePath in stopNodes) {\n    const stopNodeExp = stopNodes[stopNodePath];\n    if( allNodesExp === stopNodeExp || jPath === stopNodeExp  ) return true;\n  }\n  return false;\n}\n\n/**\n * Returns the tag Expression and where it is ending handling single-double quotes situation\n * @param {string} xmlData \n * @param {number} i starting index\n * @returns \n */\nfunction tagExpWithClosingIndex(xmlData, i, closingChar = \">\"){\n  let attrBoundary;\n  let tagExp = \"\";\n  for (let index = i; index < xmlData.length; index++) {\n    let ch = xmlData[index];\n    if (attrBoundary) {\n        if (ch === attrBoundary) attrBoundary = \"\";//reset\n    } else if (ch === '\"' || ch === \"'\") {\n        attrBoundary = ch;\n    } else if (ch === closingChar[0]) {\n      if(closingChar[1]){\n        if(xmlData[index + 1] === closingChar[1]){\n          return {\n            data: tagExp,\n            index: index\n          }\n        }\n      }else{\n        return {\n          data: tagExp,\n          index: index\n        }\n      }\n    } else if (ch === '\\t') {\n      ch = \" \"\n    }\n    tagExp += ch;\n  }\n}\n\nfunction findClosingIndex(xmlData, str, i, errMsg){\n  const closingIndex = xmlData.indexOf(str, i);\n  if(closingIndex === -1){\n    throw new Error(errMsg)\n  }else{\n    return closingIndex + str.length - 1;\n  }\n}\n\nfunction readTagExp(xmlData,i, removeNSPrefix, closingChar = \">\"){\n  const result = tagExpWithClosingIndex(xmlData, i+1, closingChar);\n  if(!result) return;\n  let tagExp = result.data;\n  const closeIndex = result.index;\n  const separatorIndex = tagExp.search(/\\s/);\n  let tagName = tagExp;\n  let attrExpPresent = true;\n  if(separatorIndex !== -1){//separate tag name and attributes expression\n    tagName = tagExp.substring(0, separatorIndex);\n    tagExp = tagExp.substring(separatorIndex + 1).trimStart();\n  }\n\n  const rawTagName = tagName;\n  if(removeNSPrefix){\n    const colonIndex = tagName.indexOf(\":\");\n    if(colonIndex !== -1){\n      tagName = tagName.substr(colonIndex+1);\n      attrExpPresent = tagName !== result.data.substr(colonIndex + 1);\n    }\n  }\n\n  return {\n    tagName: tagName,\n    tagExp: tagExp,\n    closeIndex: closeIndex,\n    attrExpPresent: attrExpPresent,\n    rawTagName: rawTagName,\n  }\n}\n/**\n * find paired tag for a stop node\n * @param {string} xmlData \n * @param {string} tagName \n * @param {number} i \n */\nfunction readStopNodeData(xmlData, tagName, i){\n  const startIndex = i;\n  // Starting at 1 since we already have an open tag\n  let openTagCount = 1;\n\n  for (; i < xmlData.length; i++) {\n    if( xmlData[i] === \"<\"){ \n      if (xmlData[i+1] === \"/\") {//close tag\n          const closeIndex = findClosingIndex(xmlData, \">\", i, `${tagName} is not closed`);\n          let closeTagName = xmlData.substring(i+2,closeIndex).trim();\n          if(closeTagName === tagName){\n            openTagCount--;\n            if (openTagCount === 0) {\n              return {\n                tagContent: xmlData.substring(startIndex, i),\n                i : closeIndex\n              }\n            }\n          }\n          i=closeIndex;\n        } else if(xmlData[i+1] === '?') { \n          const closeIndex = findClosingIndex(xmlData, \"?>\", i+1, \"StopNode is not closed.\")\n          i=closeIndex;\n        } else if(xmlData.substr(i + 1, 3) === '!--') { \n          const closeIndex = findClosingIndex(xmlData, \"-->\", i+3, \"StopNode is not closed.\")\n          i=closeIndex;\n        } else if(xmlData.substr(i + 1, 2) === '![') { \n          const closeIndex = findClosingIndex(xmlData, \"]]>\", i, \"StopNode is not closed.\") - 2;\n          i=closeIndex;\n        } else {\n          const tagData = readTagExp(xmlData, i, '>')\n\n          if (tagData) {\n            const openTagName = tagData && tagData.tagName;\n            if (openTagName === tagName && tagData.tagExp[tagData.tagExp.length-1] !== \"/\") {\n              openTagCount++;\n            }\n            i=tagData.closeIndex;\n          }\n        }\n      }\n  }//end for loop\n}\n\nfunction parseValue(val, shouldParse, options) {\n  if (shouldParse && typeof val === 'string') {\n    //console.log(options)\n    const newval = val.trim();\n    if(newval === 'true' ) return true;\n    else if(newval === 'false' ) return false;\n    else return toNumber(val, options);\n  } else {\n    if (util.isExist(val)) {\n      return val;\n    } else {\n      return '';\n    }\n  }\n}\n\n\nmodule.exports = OrderedObjParser;\n","'use strict';\n\n/**\n * \n * @param {array} node \n * @param {any} options \n * @returns \n */\nfunction prettify(node, options){\n  return compress( node, options);\n}\n\n/**\n * \n * @param {array} arr \n * @param {object} options \n * @param {string} jPath \n * @returns object\n */\nfunction compress(arr, options, jPath){\n  let text;\n  const compressedObj = {};\n  for (let i = 0; i < arr.length; i++) {\n    const tagObj = arr[i];\n    const property = propName(tagObj);\n    let newJpath = \"\";\n    if(jPath === undefined) newJpath = property;\n    else newJpath = jPath + \".\" + property;\n\n    if(property === options.textNodeName){\n      if(text === undefined) text = tagObj[property];\n      else text += \"\" + tagObj[property];\n    }else if(property === undefined){\n      continue;\n    }else if(tagObj[property]){\n      \n      let val = compress(tagObj[property], options, newJpath);\n      const isLeaf = isLeafTag(val, options);\n\n      if(tagObj[\":@\"]){\n        assignAttributes( val, tagObj[\":@\"], newJpath, options);\n      }else if(Object.keys(val).length === 1 && val[options.textNodeName] !== undefined && !options.alwaysCreateTextNode){\n        val = val[options.textNodeName];\n      }else if(Object.keys(val).length === 0){\n        if(options.alwaysCreateTextNode) val[options.textNodeName] = \"\";\n        else val = \"\";\n      }\n\n      if(compressedObj[property] !== undefined && compressedObj.hasOwnProperty(property)) {\n        if(!Array.isArray(compressedObj[property])) {\n            compressedObj[property] = [ compressedObj[property] ];\n        }\n        compressedObj[property].push(val);\n      }else{\n        //TODO: if a node is not an array, then check if it should be an array\n        //also determine if it is a leaf node\n        if (options.isArray(property, newJpath, isLeaf )) {\n          compressedObj[property] = [val];\n        }else{\n          compressedObj[property] = val;\n        }\n      }\n    }\n    \n  }\n  // if(text && text.length > 0) compressedObj[options.textNodeName] = text;\n  if(typeof text === \"string\"){\n    if(text.length > 0) compressedObj[options.textNodeName] = text;\n  }else if(text !== undefined) compressedObj[options.textNodeName] = text;\n  return compressedObj;\n}\n\nfunction propName(obj){\n  const keys = Object.keys(obj);\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    if(key !== \":@\") return key;\n  }\n}\n\nfunction assignAttributes(obj, attrMap, jpath, options){\n  if (attrMap) {\n    const keys = Object.keys(attrMap);\n    const len = keys.length; //don't make it inline\n    for (let i = 0; i < len; i++) {\n      const atrrName = keys[i];\n      if (options.isArray(atrrName, jpath + \".\" + atrrName, true, true)) {\n        obj[atrrName] = [ attrMap[atrrName] ];\n      } else {\n        obj[atrrName] = attrMap[atrrName];\n      }\n    }\n  }\n}\n\nfunction isLeafTag(obj, options){\n  const { textNodeName } = options;\n  const propCount = Object.keys(obj).length;\n  \n  if (propCount === 0) {\n    return true;\n  }\n\n  if (\n    propCount === 1 &&\n    (obj[textNodeName] || typeof obj[textNodeName] === \"boolean\" || obj[textNodeName] === 0)\n  ) {\n    return true;\n  }\n\n  return false;\n}\nexports.prettify = prettify;\n","const { buildOptions} = require(\"./OptionsBuilder\");\nconst OrderedObjParser = require(\"./OrderedObjParser\");\nconst { prettify} = require(\"./node2json\");\nconst validator = require('../validator');\n\nclass XMLParser{\n    \n    constructor(options){\n        this.externalEntities = {};\n        this.options = buildOptions(options);\n        \n    }\n    /**\n     * Parse XML dats to JS object \n     * @param {string|Buffer} xmlData \n     * @param {boolean|Object} validationOption \n     */\n    parse(xmlData,validationOption){\n        if(typeof xmlData === \"string\"){\n        }else if( xmlData.toString){\n            xmlData = xmlData.toString();\n        }else{\n            throw new Error(\"XML data is accepted in String or Bytes[] form.\")\n        }\n        if( validationOption){\n            if(validationOption === true) validationOption = {}; //validate with default options\n            \n            const result = validator.validate(xmlData, validationOption);\n            if (result !== true) {\n              throw Error( `${result.err.msg}:${result.err.line}:${result.err.col}` )\n            }\n          }\n        const orderedObjParser = new OrderedObjParser(this.options);\n        orderedObjParser.addExternalEntities(this.externalEntities);\n        const orderedResult = orderedObjParser.parseXml(xmlData);\n        if(this.options.preserveOrder || orderedResult === undefined) return orderedResult;\n        else return prettify(orderedResult, this.options);\n    }\n\n    /**\n     * Add Entity which is not by default supported by this library\n     * @param {string} key \n     * @param {string} value \n     */\n    addEntity(key, value){\n        if(value.indexOf(\"&\") !== -1){\n            throw new Error(\"Entity value can't have '&'\")\n        }else if(key.indexOf(\"&\") !== -1 || key.indexOf(\";\") !== -1){\n            throw new Error(\"An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'\")\n        }else if(value === \"&\"){\n            throw new Error(\"An entity with value '&' is not permitted\");\n        }else{\n            this.externalEntities[key] = value;\n        }\n    }\n}\n\nmodule.exports = XMLParser;","const EOL = \"\\n\";\n\n/**\n * \n * @param {array} jArray \n * @param {any} options \n * @returns \n */\nfunction toXml(jArray, options) {\n    let indentation = \"\";\n    if (options.format && options.indentBy.length > 0) {\n        indentation = EOL;\n    }\n    return arrToStr(jArray, options, \"\", indentation);\n}\n\nfunction arrToStr(arr, options, jPath, indentation) {\n    let xmlStr = \"\";\n    let isPreviousElementTag = false;\n\n    for (let i = 0; i < arr.length; i++) {\n        const tagObj = arr[i];\n        const tagName = propName(tagObj);\n        if(tagName === undefined) continue;\n\n        let newJPath = \"\";\n        if (jPath.length === 0) newJPath = tagName\n        else newJPath = `${jPath}.${tagName}`;\n\n        if (tagName === options.textNodeName) {\n            let tagText = tagObj[tagName];\n            if (!isStopNode(newJPath, options)) {\n                tagText = options.tagValueProcessor(tagName, tagText);\n                tagText = replaceEntitiesValue(tagText, options);\n            }\n            if (isPreviousElementTag) {\n                xmlStr += indentation;\n            }\n            xmlStr += tagText;\n            isPreviousElementTag = false;\n            continue;\n        } else if (tagName === options.cdataPropName) {\n            if (isPreviousElementTag) {\n                xmlStr += indentation;\n            }\n            xmlStr += `<![CDATA[${tagObj[tagName][0][options.textNodeName]}]]>`;\n            isPreviousElementTag = false;\n            continue;\n        } else if (tagName === options.commentPropName) {\n            xmlStr += indentation + `<!--${tagObj[tagName][0][options.textNodeName]}-->`;\n            isPreviousElementTag = true;\n            continue;\n        } else if (tagName[0] === \"?\") {\n            const attStr = attr_to_str(tagObj[\":@\"], options);\n            const tempInd = tagName === \"?xml\" ? \"\" : indentation;\n            let piTextNodeName = tagObj[tagName][0][options.textNodeName];\n            piTextNodeName = piTextNodeName.length !== 0 ? \" \" + piTextNodeName : \"\"; //remove extra spacing\n            xmlStr += tempInd + `<${tagName}${piTextNodeName}${attStr}?>`;\n            isPreviousElementTag = true;\n            continue;\n        }\n        let newIdentation = indentation;\n        if (newIdentation !== \"\") {\n            newIdentation += options.indentBy;\n        }\n        const attStr = attr_to_str(tagObj[\":@\"], options);\n        const tagStart = indentation + `<${tagName}${attStr}`;\n        const tagValue = arrToStr(tagObj[tagName], options, newJPath, newIdentation);\n        if (options.unpairedTags.indexOf(tagName) !== -1) {\n            if (options.suppressUnpairedNode) xmlStr += tagStart + \">\";\n            else xmlStr += tagStart + \"/>\";\n        } else if ((!tagValue || tagValue.length === 0) && options.suppressEmptyNode) {\n            xmlStr += tagStart + \"/>\";\n        } else if (tagValue && tagValue.endsWith(\">\")) {\n            xmlStr += tagStart + `>${tagValue}${indentation}</${tagName}>`;\n        } else {\n            xmlStr += tagStart + \">\";\n            if (tagValue && indentation !== \"\" && (tagValue.includes(\"/>\") || tagValue.includes(\"</\"))) {\n                xmlStr += indentation + options.indentBy + tagValue + indentation;\n            } else {\n                xmlStr += tagValue;\n            }\n            xmlStr += `</${tagName}>`;\n        }\n        isPreviousElementTag = true;\n    }\n\n    return xmlStr;\n}\n\nfunction propName(obj) {\n    const keys = Object.keys(obj);\n    for (let i = 0; i < keys.length; i++) {\n        const key = keys[i];\n        if(!obj.hasOwnProperty(key)) continue;\n        if (key !== \":@\") return key;\n    }\n}\n\nfunction attr_to_str(attrMap, options) {\n    let attrStr = \"\";\n    if (attrMap && !options.ignoreAttributes) {\n        for (let attr in attrMap) {\n            if(!attrMap.hasOwnProperty(attr)) continue;\n            let attrVal = options.attributeValueProcessor(attr, attrMap[attr]);\n            attrVal = replaceEntitiesValue(attrVal, options);\n            if (attrVal === true && options.suppressBooleanAttributes) {\n                attrStr += ` ${attr.substr(options.attributeNamePrefix.length)}`;\n            } else {\n                attrStr += ` ${attr.substr(options.attributeNamePrefix.length)}=\"${attrVal}\"`;\n            }\n        }\n    }\n    return attrStr;\n}\n\nfunction isStopNode(jPath, options) {\n    jPath = jPath.substr(0, jPath.length - options.textNodeName.length - 1);\n    let tagName = jPath.substr(jPath.lastIndexOf(\".\") + 1);\n    for (let index in options.stopNodes) {\n        if (options.stopNodes[index] === jPath || options.stopNodes[index] === \"*.\" + tagName) return true;\n    }\n    return false;\n}\n\nfunction replaceEntitiesValue(textValue, options) {\n    if (textValue && textValue.length > 0 && options.processEntities) {\n        for (let i = 0; i < options.entities.length; i++) {\n            const entity = options.entities[i];\n            textValue = textValue.replace(entity.regex, entity.val);\n        }\n    }\n    return textValue;\n}\nmodule.exports = toXml;\n","'use strict';\n//parse Empty Node as self closing node\nconst buildFromOrderedJs = require('./orderedJs2Xml');\nconst getIgnoreAttributesFn = require('../ignoreAttributes')\n\nconst defaultOptions = {\n  attributeNamePrefix: '@_',\n  attributesGroupName: false,\n  textNodeName: '#text',\n  ignoreAttributes: true,\n  cdataPropName: false,\n  format: false,\n  indentBy: '  ',\n  suppressEmptyNode: false,\n  suppressUnpairedNode: true,\n  suppressBooleanAttributes: true,\n  tagValueProcessor: function(key, a) {\n    return a;\n  },\n  attributeValueProcessor: function(attrName, a) {\n    return a;\n  },\n  preserveOrder: false,\n  commentPropName: false,\n  unpairedTags: [],\n  entities: [\n    { regex: new RegExp(\"&\", \"g\"), val: \"&amp;\" },//it must be on top\n    { regex: new RegExp(\">\", \"g\"), val: \"&gt;\" },\n    { regex: new RegExp(\"<\", \"g\"), val: \"&lt;\" },\n    { regex: new RegExp(\"\\'\", \"g\"), val: \"&apos;\" },\n    { regex: new RegExp(\"\\\"\", \"g\"), val: \"&quot;\" }\n  ],\n  processEntities: true,\n  stopNodes: [],\n  // transformTagName: false,\n  // transformAttributeName: false,\n  oneListGroup: false\n};\n\nfunction Builder(options) {\n  this.options = Object.assign({}, defaultOptions, options);\n  if (this.options.ignoreAttributes === true || this.options.attributesGroupName) {\n    this.isAttribute = function(/*a*/) {\n      return false;\n    };\n  } else {\n    this.ignoreAttributesFn = getIgnoreAttributesFn(this.options.ignoreAttributes)\n    this.attrPrefixLen = this.options.attributeNamePrefix.length;\n    this.isAttribute = isAttribute;\n  }\n\n  this.processTextOrObjNode = processTextOrObjNode\n\n  if (this.options.format) {\n    this.indentate = indentate;\n    this.tagEndChar = '>\\n';\n    this.newLine = '\\n';\n  } else {\n    this.indentate = function() {\n      return '';\n    };\n    this.tagEndChar = '>';\n    this.newLine = '';\n  }\n}\n\nBuilder.prototype.build = function(jObj) {\n  if(this.options.preserveOrder){\n    return buildFromOrderedJs(jObj, this.options);\n  }else {\n    if(Array.isArray(jObj) && this.options.arrayNodeName && this.options.arrayNodeName.length > 1){\n      jObj = {\n        [this.options.arrayNodeName] : jObj\n      }\n    }\n    return this.j2x(jObj, 0, []).val;\n  }\n};\n\nBuilder.prototype.j2x = function(jObj, level, ajPath) {\n  let attrStr = '';\n  let val = '';\n  const jPath = ajPath.join('.')\n  for (let key in jObj) {\n    if(!Object.prototype.hasOwnProperty.call(jObj, key)) continue;\n    if (typeof jObj[key] === 'undefined') {\n      // supress undefined node only if it is not an attribute\n      if (this.isAttribute(key)) {\n        val += '';\n      }\n    } else if (jObj[key] === null) {\n      // null attribute should be ignored by the attribute list, but should not cause the tag closing\n      if (this.isAttribute(key)) {\n        val += '';\n      } else if (key[0] === '?') {\n        val += this.indentate(level) + '<' + key + '?' + this.tagEndChar;\n      } else {\n        val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n      }\n      // val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n    } else if (jObj[key] instanceof Date) {\n      val += this.buildTextValNode(jObj[key], key, '', level);\n    } else if (typeof jObj[key] !== 'object') {\n      //premitive type\n      const attr = this.isAttribute(key);\n      if (attr && !this.ignoreAttributesFn(attr, jPath)) {\n        attrStr += this.buildAttrPairStr(attr, '' + jObj[key]);\n      } else if (!attr) {\n        //tag value\n        if (key === this.options.textNodeName) {\n          let newval = this.options.tagValueProcessor(key, '' + jObj[key]);\n          val += this.replaceEntitiesValue(newval);\n        } else {\n          val += this.buildTextValNode(jObj[key], key, '', level);\n        }\n      }\n    } else if (Array.isArray(jObj[key])) {\n      //repeated nodes\n      const arrLen = jObj[key].length;\n      let listTagVal = \"\";\n      let listTagAttr = \"\";\n      for (let j = 0; j < arrLen; j++) {\n        const item = jObj[key][j];\n        if (typeof item === 'undefined') {\n          // supress undefined node\n        } else if (item === null) {\n          if(key[0] === \"?\") val += this.indentate(level) + '<' + key + '?' + this.tagEndChar;\n          else val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n          // val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n        } else if (typeof item === 'object') {\n          if(this.options.oneListGroup){\n            const result = this.j2x(item, level + 1, ajPath.concat(key));\n            listTagVal += result.val;\n            if (this.options.attributesGroupName && item.hasOwnProperty(this.options.attributesGroupName)) {\n              listTagAttr += result.attrStr\n            }\n          }else{\n            listTagVal += this.processTextOrObjNode(item, key, level, ajPath)\n          }\n        } else {\n          if (this.options.oneListGroup) {\n            let textValue = this.options.tagValueProcessor(key, item);\n            textValue = this.replaceEntitiesValue(textValue);\n            listTagVal += textValue;\n          } else {\n            listTagVal += this.buildTextValNode(item, key, '', level);\n          }\n        }\n      }\n      if(this.options.oneListGroup){\n        listTagVal = this.buildObjectNode(listTagVal, key, listTagAttr, level);\n      }\n      val += listTagVal;\n    } else {\n      //nested node\n      if (this.options.attributesGroupName && key === this.options.attributesGroupName) {\n        const Ks = Object.keys(jObj[key]);\n        const L = Ks.length;\n        for (let j = 0; j < L; j++) {\n          attrStr += this.buildAttrPairStr(Ks[j], '' + jObj[key][Ks[j]]);\n        }\n      } else {\n        val += this.processTextOrObjNode(jObj[key], key, level, ajPath)\n      }\n    }\n  }\n  return {attrStr: attrStr, val: val};\n};\n\nBuilder.prototype.buildAttrPairStr = function(attrName, val){\n  val = this.options.attributeValueProcessor(attrName, '' + val);\n  val = this.replaceEntitiesValue(val);\n  if (this.options.suppressBooleanAttributes && val === \"true\") {\n    return ' ' + attrName;\n  } else return ' ' + attrName + '=\"' + val + '\"';\n}\n\nfunction processTextOrObjNode (object, key, level, ajPath) {\n  const result = this.j2x(object, level + 1, ajPath.concat(key));\n  if (object[this.options.textNodeName] !== undefined && Object.keys(object).length === 1) {\n    return this.buildTextValNode(object[this.options.textNodeName], key, result.attrStr, level);\n  } else {\n    return this.buildObjectNode(result.val, key, result.attrStr, level);\n  }\n}\n\nBuilder.prototype.buildObjectNode = function(val, key, attrStr, level) {\n  if(val === \"\"){\n    if(key[0] === \"?\") return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar;\n    else {\n      return this.indentate(level) + '<' + key + attrStr + this.closeTag(key) + this.tagEndChar;\n    }\n  }else{\n\n    let tagEndExp = '</' + key + this.tagEndChar;\n    let piClosingChar = \"\";\n    \n    if(key[0] === \"?\") {\n      piClosingChar = \"?\";\n      tagEndExp = \"\";\n    }\n  \n    // attrStr is an empty string in case the attribute came as undefined or null\n    if ((attrStr || attrStr === '') && val.indexOf('<') === -1) {\n      return ( this.indentate(level) + '<' +  key + attrStr + piClosingChar + '>' + val + tagEndExp );\n    } else if (this.options.commentPropName !== false && key === this.options.commentPropName && piClosingChar.length === 0) {\n      return this.indentate(level) + `<!--${val}-->` + this.newLine;\n    }else {\n      return (\n        this.indentate(level) + '<' + key + attrStr + piClosingChar + this.tagEndChar +\n        val +\n        this.indentate(level) + tagEndExp    );\n    }\n  }\n}\n\nBuilder.prototype.closeTag = function(key){\n  let closeTag = \"\";\n  if(this.options.unpairedTags.indexOf(key) !== -1){ //unpaired\n    if(!this.options.suppressUnpairedNode) closeTag = \"/\"\n  }else if(this.options.suppressEmptyNode){ //empty\n    closeTag = \"/\";\n  }else{\n    closeTag = `></${key}`\n  }\n  return closeTag;\n}\n\nfunction buildEmptyObjNode(val, key, attrStr, level) {\n  if (val !== '') {\n    return this.buildObjectNode(val, key, attrStr, level);\n  } else {\n    if(key[0] === \"?\") return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar;\n    else {\n      return  this.indentate(level) + '<' + key + attrStr + '/' + this.tagEndChar;\n      // return this.buildTagStr(level,key, attrStr);\n    }\n  }\n}\n\nBuilder.prototype.buildTextValNode = function(val, key, attrStr, level) {\n  if (this.options.cdataPropName !== false && key === this.options.cdataPropName) {\n    return this.indentate(level) + `<![CDATA[${val}]]>` +  this.newLine;\n  }else if (this.options.commentPropName !== false && key === this.options.commentPropName) {\n    return this.indentate(level) + `<!--${val}-->` +  this.newLine;\n  }else if(key[0] === \"?\") {//PI tag\n    return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar; \n  }else{\n    let textValue = this.options.tagValueProcessor(key, val);\n    textValue = this.replaceEntitiesValue(textValue);\n  \n    if( textValue === ''){\n      return this.indentate(level) + '<' + key + attrStr + this.closeTag(key) + this.tagEndChar;\n    }else{\n      return this.indentate(level) + '<' + key + attrStr + '>' +\n         textValue +\n        '</' + key + this.tagEndChar;\n    }\n  }\n}\n\nBuilder.prototype.replaceEntitiesValue = function(textValue){\n  if(textValue && textValue.length > 0 && this.options.processEntities){\n    for (let i=0; i<this.options.entities.length; i++) {\n      const entity = this.options.entities[i];\n      textValue = textValue.replace(entity.regex, entity.val);\n    }\n  }\n  return textValue;\n}\n\nfunction indentate(level) {\n  return this.options.indentBy.repeat(level);\n}\n\nfunction isAttribute(name /*, options*/) {\n  if (name.startsWith(this.options.attributeNamePrefix) && name !== this.options.textNodeName) {\n    return name.substr(this.attrPrefixLen);\n  } else {\n    return false;\n  }\n}\n\nmodule.exports = Builder;\n","'use strict';\n\nconst validator = require('./validator');\nconst XMLParser = require('./xmlparser/XMLParser');\nconst XMLBuilder = require('./xmlbuilder/json2xml');\n\nmodule.exports = {\n  XMLParser: XMLParser,\n  XMLValidator: validator,\n  XMLBuilder: XMLBuilder\n}","import {XMLParser, XMLValidator} from 'fast-xml-parser';\n\nexport default function isSvg(string) {\n\tif (typeof string !== 'string') {\n\t\tthrow new TypeError(`Expected a \\`string\\`, got \\`${typeof string}\\``);\n\t}\n\n\tstring = string.trim();\n\n\tif (string.length === 0) {\n\t\treturn false;\n\t}\n\n\t// Has to be `!==` as it can also return an object with error info.\n\tif (XMLValidator.validate(string) !== true) {\n\t\treturn false;\n\t}\n\n\tlet jsonObject;\n\tconst parser = new XMLParser();\n\n\ttry {\n\t\tjsonObject = parser.parse(string);\n\t} catch {\n\t\treturn false;\n\t}\n\n\tif (!jsonObject) {\n\t\treturn false;\n\t}\n\n\tif (!Object.keys(jsonObject).some(x => x.toLowerCase() === 'svg')) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n","/**\n * SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport type { Folder } from '../files/folder'\nimport type { Node } from '../files/node'\nimport isSvg from 'is-svg'\n\nimport { Column } from './column.js'\n\nexport type ContentsWithRoot = {\n\tfolder: Folder,\n\tcontents: Node[]\n}\n\ninterface ViewData {\n\t/** Unique view ID */\n\tid: string\n\t/** Translated view name */\n\tname: string\n\t/** Translated accessible description of the view */\n\tcaption?: string\n\n\t/** Translated title of the empty view */\n\temptyTitle?: string\n\t/** Translated description of the empty view */\n\temptyCaption?: string\n\n\t/**\n\t * Method return the content of the  provided path\n\t * This ideally should be a cancellable promise.\n\t * promise.cancel(reason) will be called when the directory\n\t * change and the promise is not resolved yet.\n\t * You _must_ also return the current directory\n\t * information alongside with its content.\n\t */\n\tgetContents: (path: string) => Promise<ContentsWithRoot>\n\t/** The view icon as an inline svg */\n\ticon: string\n\n\t/**\n\t * The view order.\n\t * If not set will be natural sorted by view name.\n\t */\n\torder?: number\n\n\t/**\n\t * Custom params to give to the router on click\n\t * If defined, will be treated as a dummy view and\n\t * will just redirect and not fetch any contents.\n\t */\n\tparams?: Record<string, string>\n\n\t/**\n\t * This view column(s). Name and actions are\n\t * by default always included\n\t */\n\tcolumns?: Column[]\n\t/** The empty view element to render your empty content into */\n\temptyView?: (div: HTMLDivElement) => void\n\t/** The parent unique ID */\n\tparent?: string\n\t/** This view is sticky (sent at the bottom) */\n\tsticky?: boolean\n\n\t/**\n\t * This view has children and is expanded (by default)\n\t * or not. This will be overridden by user config.\n\t */\n\texpanded?: boolean\n\n\t/**\n\t * Will be used as default if the user\n\t * haven't customized their sorting column\n\t */\n\tdefaultSortKey?: string\n\n\t/**\n\t * Method called to load child views if any\n\t */\n\t// eslint-disable-next-line no-use-before-define\n\tloadChildViews?: (view: View) => Promise<void>\n}\n\nexport class View implements ViewData {\n\n\tprivate _view: ViewData\n\n\tconstructor(view: ViewData) {\n\t\tisValidView(view)\n\t\tthis._view = view\n\t}\n\n\tget id() {\n\t\treturn this._view.id\n\t}\n\n\tget name() {\n\t\treturn this._view.name\n\t}\n\n\tget caption() {\n\t\treturn this._view.caption\n\t}\n\n\tget emptyTitle() {\n\t\treturn this._view.emptyTitle\n\t}\n\n\tget emptyCaption() {\n\t\treturn this._view.emptyCaption\n\t}\n\n\tget getContents() {\n\t\treturn this._view.getContents\n\t}\n\n\tget icon() {\n\t\treturn this._view.icon\n\t}\n\n\tset icon(icon) {\n\t\tthis._view.icon = icon\n\t}\n\n\tget order() {\n\t\treturn this._view.order\n\t}\n\n\tset order(order) {\n\t\tthis._view.order = order\n\t}\n\n\tget params() {\n\t\treturn this._view.params\n\t}\n\n\tset params(params) {\n\t\tthis._view.params = params\n\t}\n\n\tget columns() {\n\t\treturn this._view.columns\n\t}\n\n\tget emptyView() {\n\t\treturn this._view.emptyView\n\t}\n\n\tget parent() {\n\t\treturn this._view.parent\n\t}\n\n\tget sticky() {\n\t\treturn this._view.sticky\n\t}\n\n\tget expanded() {\n\t\treturn this._view.expanded\n\t}\n\n\tset expanded(expanded: boolean | undefined) {\n\t\tthis._view.expanded = expanded\n\t}\n\n\tget defaultSortKey() {\n\t\treturn this._view.defaultSortKey\n\t}\n\n\tget loadChildViews() {\n\t\treturn this._view.loadChildViews\n\t}\n\n}\n\n/**\n * Typescript cannot validate an interface.\n * Please keep in sync with the View interface requirements.\n *\n * @param {ViewData} view the view to check\n * @return {boolean} true if the column is valid\n * @throws {Error} if the view is not valid\n */\nconst isValidView = function(view: ViewData): boolean {\n\tif (!view.id || typeof view.id !== 'string') {\n\t\tthrow new Error('View id is required and must be a string')\n\t}\n\n\tif (!view.name || typeof view.name !== 'string') {\n\t\tthrow new Error('View name is required and must be a string')\n\t}\n\n\tif ('caption' in view && typeof view.caption !== 'string') {\n\t\tthrow new Error('View caption must be a string')\n\t}\n\n\tif (!view.getContents || typeof view.getContents !== 'function') {\n\t\tthrow new Error('View getContents is required and must be a function')\n\t}\n\n\tif (!view.icon || typeof view.icon !== 'string' || !isSvg(view.icon)) {\n\t\tthrow new Error('View icon is required and must be a valid svg string')\n\t}\n\n\tif ('order' in view && typeof view.order !== 'number') {\n\t\tthrow new Error('View order must be a number')\n\t}\n\n\t// Optional properties\n\tif (view.columns) {\n\t\tview.columns.forEach((column) => {\n\t\t\tif (!(column instanceof Column)) {\n\t\t\t\tthrow new Error('View columns must be an array of Column. Invalid column found')\n\t\t\t}\n\t\t})\n\t}\n\n\tif (view.emptyView && typeof view.emptyView !== 'function') {\n\t\tthrow new Error('View emptyView must be a function')\n\t}\n\n\tif (view.parent && typeof view.parent !== 'string') {\n\t\tthrow new Error('View parent must be a string')\n\t}\n\n\tif ('sticky' in view && typeof view.sticky !== 'boolean') {\n\t\tthrow new Error('View sticky must be a boolean')\n\t}\n\n\tif ('expanded' in view && typeof view.expanded !== 'boolean') {\n\t\tthrow new Error('View expanded must be a boolean')\n\t}\n\n\tif (view.defaultSortKey && typeof view.defaultSortKey !== 'string') {\n\t\tthrow new Error('View defaultSortKey must be a string')\n\t}\n\n\tif (view.loadChildViews && typeof view.loadChildViews !== 'function') {\n\t\tthrow new Error('View loadChildViews must be a function')\n\t}\n\n\treturn true\n}\n","const debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n","// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n","const {\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_LENGTH,\n} = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst safeRe = exports.safeRe = []\nconst src = exports.src = []\nconst t = exports.t = {}\nlet R = 0\n\nconst LETTERDASHNUMBER = '[a-zA-Z0-9-]'\n\n// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n// used internally via the safeRe object since all inputs in this library get\n// normalized first to trim and collapse all extra whitespace. The original\n// regexes are exported for userland consumption and lower level usage. A\n// future breaking change could export the safer regex only with a note that\n// all input should have extra whitespace removed.\nconst safeRegexReplacements = [\n  ['\\\\s', 1],\n  ['\\\\d', MAX_LENGTH],\n  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n]\n\nconst makeSafeRegex = (value) => {\n  for (const [token, max] of safeRegexReplacements) {\n    value = value\n      .split(`${token}*`).join(`${token}{0,${max}}`)\n      .split(`${token}+`).join(`${token}{1,${max}}`)\n  }\n  return value\n}\n\nconst createToken = (name, value, isGlobal) => {\n  const safe = makeSafeRegex(value)\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '\\\\d+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`)\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NUMERICIDENTIFIER]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NUMERICIDENTIFIERLOOSE]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`)\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCEPLAIN', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`)\ncreateToken('COERCE', `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`)\ncreateToken('COERCEFULL', src[t.COERCEPLAIN] +\n              `(?:${src[t.PRERELEASE]})?` +\n              `(?:${src[t.BUILD]})?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\ncreateToken('COERCERTLFULL', src[t.COERCEFULL], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n","// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n","const numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n","const debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n          version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('build compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0\n\n        if (!identifier && identifierBase === false) {\n          throw new Error('invalid increment argument: identifier is empty')\n        }\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base]\n          if (identifierBase === false) {\n            prerelease = [identifier]\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease\n            }\n          } else {\n            this.prerelease = prerelease\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format()\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`\n    }\n    return this\n  }\n}\n\nmodule.exports = SemVer\n","const SemVer = require('../classes/semver')\nconst parse = (version, options, throwErrors = false) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    if (!throwErrors) {\n      return null\n    }\n    throw er\n  }\n}\n\nmodule.exports = parse\n","const parse = require('./parse')\nconst valid = (version, options) => {\n  const v = parse(version, options)\n  return v ? v.version : null\n}\nmodule.exports = valid\n","const SemVer = require('../classes/semver')\nconst major = (a, loose) => new SemVer(a, loose).major\nmodule.exports = major\n","import valid from \"semver/functions/valid.js\";\nimport major from \"semver/functions/major.js\";\nclass ProxyBus {\n  bus;\n  constructor(bus2) {\n    if (typeof bus2.getVersion !== \"function\" || !valid(bus2.getVersion())) {\n      console.warn(\"Proxying an event bus with an unknown or invalid version\");\n    } else if (major(bus2.getVersion()) !== major(this.getVersion())) {\n      console.warn(\n        \"Proxying an event bus of version \" + bus2.getVersion() + \" with \" + this.getVersion()\n      );\n    }\n    this.bus = bus2;\n  }\n  getVersion() {\n    return \"3.3.1\";\n  }\n  subscribe(name, handler) {\n    this.bus.subscribe(name, handler);\n  }\n  unsubscribe(name, handler) {\n    this.bus.unsubscribe(name, handler);\n  }\n  emit(name, event) {\n    this.bus.emit(name, event);\n  }\n}\nclass SimpleBus {\n  handlers = /* @__PURE__ */ new Map();\n  getVersion() {\n    return \"3.3.1\";\n  }\n  subscribe(name, handler) {\n    this.handlers.set(\n      name,\n      (this.handlers.get(name) || []).concat(\n        handler\n      )\n    );\n  }\n  unsubscribe(name, handler) {\n    this.handlers.set(\n      name,\n      (this.handlers.get(name) || []).filter((h) => h !== handler)\n    );\n  }\n  emit(name, event) {\n    (this.handlers.get(name) || []).forEach((h) => {\n      try {\n        h(event);\n      } catch (e) {\n        console.error(\"could not invoke event listener\", e);\n      }\n    });\n  }\n}\nlet bus = null;\nfunction getBus() {\n  if (bus !== null) {\n    return bus;\n  }\n  if (typeof window === \"undefined\") {\n    return new Proxy({}, {\n      get: () => {\n        return () => console.error(\n          \"Window not available, EventBus can not be established!\"\n        );\n      }\n    });\n  }\n  if (window.OC?._eventBus && typeof window._nc_event_bus === \"undefined\") {\n    console.warn(\n      \"found old event bus instance at OC._eventBus. Update your version!\"\n    );\n    window._nc_event_bus = window.OC._eventBus;\n  }\n  if (typeof window?._nc_event_bus !== \"undefined\") {\n    bus = new ProxyBus(window._nc_event_bus);\n  } else {\n    bus = window._nc_event_bus = new SimpleBus();\n  }\n  return bus;\n}\nfunction subscribe(name, handler) {\n  getBus().subscribe(name, handler);\n}\nfunction unsubscribe(name, handler) {\n  getBus().unsubscribe(name, handler);\n}\nfunction emit(name, event) {\n  getBus().emit(name, event);\n}\nexport {\n  ProxyBus,\n  SimpleBus,\n  emit,\n  subscribe,\n  unsubscribe\n};\n","/*!\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { emit } from '@nextcloud/event-bus'\nimport { TypedEventTarget } from 'typescript-event-target'\nimport { INode } from './files/node'\n\n/**\n * Active filters can provide one or more \"chips\" to show the currently active state.\n * Must at least provide a text representing the filters state and a callback to unset that state (disable this filter).\n */\nexport interface IFileListFilterChip {\n\t/**\n\t * Text of the chip\n\t */\n\ttext: string\n\n\t/**\n\t * Optional icon to be used on the chip (inline SVG as string)\n\t */\n\ticon?: string\n\n\t/**\n\t * Optional pass a user id to use a user avatar instead of an icon\n\t */\n\tuser?: string\n\n\t/**\n\t * Handler to be called on click\n\t */\n\tonclick: () => void\n}\n\n/**\n * This event is emitted when the the filter value changed and the file list needs to be updated\n */\nexport interface FilterUpdateEvent extends CustomEvent<never> {\n\ttype: 'update:filter'\n}\n\n/**\n * This event is emitted when the the filter value changed and the file list needs to be updated\n */\nexport interface FilterUpdateChipsEvent extends CustomEvent<IFileListFilterChip[]> {\n\ttype: 'update:chips'\n}\n\ninterface IFileListFilterEvents {\n\t[name: string]: CustomEvent,\n\t'update:filter': FilterUpdateEvent\n\t'update:chips' : FilterUpdateChipsEvent\n}\n\nexport interface IFileListFilter extends TypedEventTarget<IFileListFilterEvents> {\n\n\t/**\n\t * Unique ID of this filter\n\t */\n\treadonly id: string\n\n\t/**\n\t * Order of the filter\n\t *\n\t * Use a low number to make this filter ordered in front.\n\t */\n\treadonly order: number\n\n\t/**\n\t * Filter function to decide if a node is shown.\n\t *\n\t * @param nodes Nodes to filter\n\t * @return Subset of the `nodes` parameter to show\n\t */\n\tfilter(nodes: INode[]): INode[]\n\n\t/**\n\t * If the filter needs a visual element for settings it can provide a function to mount it.\n\t * @param el The DOM element to mount to\n\t */\n\tmount?(el: HTMLElement): void\n\n\t/**\n\t * Reset the filter to the initial state.\n\t * This is called by the files app.\n\t * Implementations should make sure,that if they provide chips they need to emit the `update:chips` event.\n\t *\n\t * @since 3.10.0\n\t */\n\treset?(): void\n}\n\nexport class FileListFilter extends TypedEventTarget<IFileListFilterEvents> implements IFileListFilter {\n\n\tpublic id: string\n\n\tpublic order: number\n\n\tconstructor(id: string, order: number = 100) {\n\t\tsuper()\n\t\tthis.id = id\n\t\tthis.order = order\n\t}\n\n\tpublic filter(nodes: INode[]): INode[] {\n\t\tthrow new Error('Not implemented')\n\t\treturn nodes\n\t}\n\n\tprotected updateChips(chips: IFileListFilterChip[]) {\n\t\tthis.dispatchTypedEvent('update:chips', new CustomEvent('update:chips', { detail: chips }) as FilterUpdateChipsEvent)\n\t}\n\n\tprotected filterUpdated() {\n\t\tthis.dispatchTypedEvent('update:filter', new CustomEvent('update:filter') as FilterUpdateEvent)\n\t}\n\n}\n\n/**\n * Register a new filter on the file list\n *\n * This only must be called once to register the filter,\n * when the filter state changes you need to call `filterUpdated` on the filter instead.\n *\n * @param filter The filter to register on the file list\n */\nexport function registerFileListFilter(filter: IFileListFilter): void {\n\tif (!window._nc_filelist_filters) {\n\t\twindow._nc_filelist_filters = new Map<string, IFileListFilter>()\n\t}\n\tif (window._nc_filelist_filters.has(filter.id)) {\n\t\tthrow new Error(`File list filter \"${filter.id}\" already registered`)\n\t}\n\twindow._nc_filelist_filters.set(filter.id, filter)\n\temit('files:filter:added', filter)\n}\n\n/**\n * Remove a registered filter from the file list\n * @param filterId The unique ID of the filter to remove\n */\nexport function unregisterFileListFilter(filterId: string): void {\n\tif (window._nc_filelist_filters && window._nc_filelist_filters.has(filterId)) {\n\t\twindow._nc_filelist_filters.delete(filterId)\n\t\temit('files:filter:removed', filterId)\n\t}\n}\n\n/**\n * Get all registered file list filters\n */\nexport function getFileListFilters(): IFileListFilter[] {\n\tif (!window._nc_filelist_filters) {\n\t\treturn []\n\t}\n\treturn [...window._nc_filelist_filters.values()]\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { type Entry, getNewFileMenu } from './newFileMenu'\nimport { type Folder } from './files/folder'\n\nexport { FileAction, getFileActions, registerFileAction, DefaultType } from './fileAction'\nexport { getFileListActions, registerFileListAction, FileListAction } from './fileListAction.ts'\nexport { Header, getFileListHeaders, registerFileListHeaders } from './fileListHeaders'\nexport { type Entry, NewMenuEntryCategory } from './newFileMenu'\nexport { Permission } from './permissions'\n\nexport { FileType } from './files/fileType'\nexport { File, type IFile } from './files/file'\nexport { Folder, type IFolder } from './files/folder'\nexport { Node, NodeStatus, type INode } from './files/node'\nexport type { NodeData } from './files/nodeData.ts'\n\nexport * from './utils/filename-validation'\nexport { getUniqueName } from './utils/filename'\nexport { formatFileSize, parseFileSize } from './utils/fileSize'\nexport { orderBy, type SortingOrder } from './utils/sorting'\nexport { sortNodes, FilesSortingMode, type FilesSortingOptions } from './utils/fileSorting'\n\nexport * from './navigation/index'\nexport * from './fileListFilters'\n\n/**\n * Add a new menu entry to the upload manager menu\n *\n * @param entry The new file menu entry\n */\nexport const addNewFileMenuEntry = function(entry: Entry) {\n\tconst newFileMenu = getNewFileMenu()\n\treturn newFileMenu.registerEntry(entry)\n}\n\n/**\n * Remove a previously registered entry from the upload menu\n *\n * @param entry Entry to remove (or name of entry)\n */\nexport const removeNewFileMenuEntry = function(entry: Entry | string) {\n\tconst newFileMenu = getNewFileMenu()\n\treturn newFileMenu.unregisterEntry(entry)\n}\n\n/**\n * Get the list of registered entries from the upload menu\n *\n * @param {Folder} context the creation context. Usually the current folder FileInfo\n */\nexport const getNewFileMenuEntries = function(context?: Folder) {\n\tconst newFileMenu = getNewFileMenu()\n\treturn newFileMenu.getEntries(context).sort((a: Entry, b: Entry) => {\n\t\t// If defined and different, sort by order\n\t\tif (a.order !== undefined\n\t\t\t&& b.order !== undefined\n\t\t\t&& a.order !== b.order) {\n\t\t\treturn a.order - b.order\n\t\t}\n\t\t// else sort by display name\n\t\treturn a.displayName.localeCompare(b.displayName, undefined, { numeric: true, sensitivity: 'base' })\n\t})\n}\n\n// Legacy export of dav utils\n// TODO: Remove with version 4 (breaking change)\nexport {\n\ttype DavProperty,\n\n\t/**\n\t * @inheritdoc\n\t * @deprecated use `defaultRemoteURL` from `@nextcloud/files/dav`\n\t */\n\tdefaultRemoteURL as davRemoteURL,\n\t/**\n\t * @inheritdoc\n\t * @deprecated use `defaultRootPath` from `@nextcloud/files/dav`\n\t */\n\tdefaultRootPath as davRootPath,\n\t/**\n\t * @inheritdoc\n\t * @deprecated use `defaultDavNamespaces` from `@nextcloud/files/dav`\n\t */\n\tdefaultDavNamespaces,\n\t/**\n\t * @inheritdoc\n\t * @deprecated use `defaultDavProperties` from `@nextcloud/files/dav`\n\t */\n\tdefaultDavProperties,\n\n\t/**\n\t * @inheritdoc\n\t * @deprecated use `getFavoriteNodes` from `@nextcloud/files/dav`\n\t */\n\tgetFavoriteNodes,\n\t/**\n\t * @inheritdoc\n\t * @deprecated use `getClient` from `@nextcloud/files/dav`\n\t */\n\tgetClient as davGetClient,\n\t/**\n\t * @inheritdoc\n\t * @deprecated use `getRemoteURL` from `@nextcloud/files/dav`\n\t */\n\tgetRemoteURL as davGetRemoteURL,\n\t/**\n\t * @inheritdoc\n\t * @deprecated use `getRootPath` from `@nextcloud/files/dav`\n\t */\n\tgetRootPath as davGetRootPath,\n\t/**\n\t * @inheritdoc\n\t * @deprecated use `resultToNode` from `@nextcloud/files/dav`\n\t */\n\tresultToNode as davResultToNode,\n\t/**\n\t * @inheritdoc\n\t * @deprecated use `getDefaultPropfind` from `@nextcloud/files/dav`\n\t */\n\tgetDefaultPropfind as davGetDefaultPropfind,\n\t/**\n\t * @inheritdoc\n\t * @deprecated use `getFavoritesReport` from `@nextcloud/files/dav`\n\t */\n\tgetFavoritesReport as davGetFavoritesReport,\n\t/**\n\t * @inheritdoc\n\t * @deprecated use `getRecentSearch` from `@nextcloud/files/dav`\n\t */\n\tgetRecentSearch as davGetRecentSearch,\n\t/**\n\t * @inheritdoc\n\t * @deprecated use `parsePermissions` from `@nextcloud/files/dav`\n\t */\n\tparsePermissions as davParsePermissions,\n\t/**\n\t * @inheritdoc\n\t * @deprecated use `getDavNameSpaces` from `@nextcloud/files/dav`\n\t */\n\tgetDavNameSpaces,\n\t/**\n\t * @inheritdoc\n\t * @deprecated use `getDavProperties` from `@nextcloud/files/dav`\n\t */\n\tgetDavProperties,\n\t/**\n\t * @inheritdoc\n\t * @deprecated use `registerDavProperty` from `@nextcloud/files/dav`\n\t */\n\tregisterDavProperty,\n} from './dav/index'\n"],"names":["NewMenuEntryCategory","logger","DefaultType","InvalidFilenameErrorReason","capabilities","getCapabilities","extname","basename","getCanonicalLocale","identifiers","getLanguage","FilesSortingMode","TypedEventTarget","exports","util","require$$0","re","ignoreAttributes","xmlNode","require$$1","require$$2","require$$3","require$$4","result","validator","attStr","XMLValidator","XMLParser","module","valid","major"],"mappings":"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","x_google_ignoreList":[11,12,13,14,15,16,17,18,19,20,21,22,23,24,26,27,28,29,30,31,32,33,34,35]}