{"version":3,"file":"public.mjs","sources":["../lib/publicShare.ts"],"sourcesContent":["/**\n * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: GPL-3.0-or-later\n *\n * @module public\n */\nimport { loadState } from '@nextcloud/initial-state'\n\n/**\n * Check if the current page is on a public share\n */\nexport function isPublicShare(): boolean {\n\t// check both the new initial state version and fallback to legacy input\n\treturn (\n\t\tloadState<boolean | null>('files_sharing', 'isPublic', null) ??\n\t\tdocument.querySelector(\n\t\t\t'input#isPublic[type=\"hidden\"][name=\"isPublic\"][value=\"1\"]',\n\t\t) !== null\n\t)\n}\n\n/**\n * Get the sharing token for the current public share\n */\nexport function getSharingToken(): string | null {\n\treturn (\n\t\tloadState<string | null>('files_sharing', 'sharingToken', null) ??\n\t\tdocument.querySelector<HTMLInputElement>('input#sharingToken[type=\"hidden\"]')\n\t\t\t?.value ??\n\t\tnull\n\t)\n}\n"],"names":[],"mappings":";AAWO,SAAS,gBAAyB;AAExC,SACC,UAA0B,iBAAiB,YAAY,IAAI,KAC3D,SAAS;AAAA,IACR;AAAA,EACK,MAAA;AAER;AAKO,SAAS,kBAAiC;AAE/C,SAAA,UAAyB,iBAAiB,gBAAgB,IAAI,KAC9D,SAAS,cAAgC,mCAAmC,GACzE,SACH;AAEF;"}